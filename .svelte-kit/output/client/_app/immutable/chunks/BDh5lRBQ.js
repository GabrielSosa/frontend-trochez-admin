var d=Object.defineProperty;var l=(t,a,i)=>a in t?d(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i;var o=(t,a,i)=>l(t,typeof a!="symbol"?a+"":a,i);const e="https://api-backend-trochez.onrender.com";class n{static getCustomUrl(a){return`${e}${a}`}}o(n,"AUTH",{login:`${e}/api/security/signin`,register:`${e}/api/security/signup`}),o(n,"USERS",{getAll:`${e}/api/users`,getById:a=>`${e}/api/users/${a}`,create:`${e}/api/users`,update:a=>`${e}/api/users/${a}`,delete:a=>`${e}/api/users/${a}`}),o(n,"AVALUOS",{getAll:`${e}/api/appraisals`,getById:a=>`${e}/api/appraisals/${a}`,create:`${e}/api/appraisals`,update:a=>`${e}/api/appraisals/${a}`,delete:a=>`${e}/api/appraisals/${a}`}),o(n,"CERTIFICADOS",{get:a=>`${e}/certificates/appraisal/${a}`}),o(n,"DASHBOARD",{summary:`${e}/api/dashboard/summary`,ventasDia:`${e}/api/dashboard/ventas-dia`,ventasMes:`${e}/api/dashboard/ventas-mes`,carrosMasAvaluos:`${e}/api/dashboard/carros-mas-avaluos`});const $=async(t,a={})=>{const i={headers:{"Content-Type":"application/json"}};try{const s=localStorage.getItem("jwtToken");s&&s!=="undefined"&&s!=="null"?s.startsWith("Bearer ")?i.headers.Authorization=s:i.headers.Authorization=`Bearer ${s}`:!t.includes("/signin")&&!t.includes("/signup")&&setTimeout(()=>{typeof window<"u"&&(window.location.href="/login")},100)}catch{}const p={...i,...a,headers:{...i.headers,...a.headers}},r=await fetch(t,p);if(!r.ok){const s=await r.json().catch(()=>({})),c=new Error(s.message||"Error en la peticiÃ³n");throw c.status=r.status,c.data=s,r.status===401&&(localStorage.removeItem("jwtToken"),setTimeout(()=>{typeof window<"u"&&!window.location.pathname.includes("/login")&&(window.location.href="/login")},100)),c}return await r.json()};export{n as A,$ as a};
