import{S as Je,i as Ke,s as Qe,d as i,p as Ye,B as Ge,q as We,r as Xe,a as ie,L as Pe,b as re,v as Ze,c as l,C as he,w as r,e as u,f as p,x as $e,h as N,y as ue,E as be,g as S,j as f,z as et,k as I,F as ye,t as U,A as tt,n as Ie,M as Ve,G as De,D as lt}from"../chunks/DH0NG5GU.js";import{N as at,e as Ne,u as rt,d as st}from"../chunks/x5rVgxpL.js";import"../chunks/IHki7fMi.js";import{g as Me}from"../chunks/Bpwd1lxs.js";import{a as nt,A as Se}from"../chunks/BDh5lRBQ.js";function Ue(o,e,t){const a=o.slice();return a[24]=e[t],a[26]=t,a}function He(o,e,t){const a=o.slice();return a[27]=e[t],a}function ot(o){let e,t,a,c='<tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No. Certificado</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vehículo</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Placa</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Color</th> <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th></tr>',d,m,w=[],D=new Map,x,b,T=Ne(o[6]);const L=v=>v[27].vehicle_appraisal_id;for(let v=0;v<T.length;v+=1){let y=He(o,T,v),C=L(y);D.set(C,w[v]=Oe(C,y))}let _=o[5]>1&&je(o);return{c(){e=f("div"),t=f("table"),a=f("thead"),a.innerHTML=c,d=I(),m=f("tbody");for(let v=0;v<w.length;v+=1)w[v].c();x=I(),_&&_.c(),b=De(),this.h()},l(v){e=u(v,"DIV",{class:!0,style:!0});var y=p(e);t=u(y,"TABLE",{class:!0,style:!0});var C=p(t);a=u(C,"THEAD",{class:!0,"data-svelte-h":!0}),ue(a)!=="svelte-mi2392"&&(a.innerHTML=c),d=N(C),m=u(C,"TBODY",{class:!0});var A=p(m);for(let Y=0;Y<w.length;Y+=1)w[Y].l(A);A.forEach(i),C.forEach(i),y.forEach(i),x=N(v),_&&_.l(v),b=De(),this.h()},h(){r(a,"class","bg-gray-50"),r(m,"class","bg-white divide-y divide-gray-200"),r(t,"class","min-w-full divide-y divide-gray-200"),Ve(t,"min-width","900px"),r(e,"class","overflow-x-auto shadow ring-1 ring-black ring-opacity-5 md:rounded-lg svelte-ymzynl"),Ve(e,"scrollbar-width","thin"),Ve(e,"scrollbar-color","#d1d5db #f3f4f6")},m(v,y){re(v,e,y),l(e,t),l(t,a),l(t,d),l(t,m);for(let C=0;C<w.length;C+=1)w[C]&&w[C].m(m,null);re(v,x,y),_&&_.m(v,y),re(v,b,y)},p(v,y){y&8640&&(T=Ne(v[6]),w=rt(w,y,L,1,v,T,D,m,st,Oe,null,He)),v[5]>1?_?_.p(v,y):(_=je(v),_.c(),_.m(b.parentNode,b)):_&&(_.d(1),_=null)},d(v){v&&(i(e),i(x),i(b));for(let y=0;y<w.length;y+=1)w[y].d();_&&_.d(v)}}}function it(o){let e,t="Cargando datos para la página actual...";return{c(){e=f("div"),e.textContent=t,this.h()},l(a){e=u(a,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1iu9zad"&&(e.textContent=t),this.h()},h(){r(e,"class","p-8 text-center text-gray-500")},m(a,c){re(a,e,c)},p:Ie,d(a){a&&i(e)}}}function ct(o){let e,t="No se encontraron avalúos que coincidan con la búsqueda.";return{c(){e=f("div"),e.textContent=t,this.h()},l(a){e=u(a,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1p5azul"&&(e.textContent=t),this.h()},h(){r(e,"class","p-8 text-center text-gray-500")},m(a,c){re(a,e,c)},p:Ie,d(a){a&&i(e)}}}function dt(o){let e,t='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(a){e=u(a,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1jvpo63"&&(e.innerHTML=t),this.h()},h(){r(e,"class","p-8 flex justify-center")},m(a,c){re(a,e,c)},p:Ie,d(a){a&&i(e)}}}function ut(o){let e;return{c(){e=U("Certificado")},l(t){e=S(t,"Certificado")},m(t,a){re(t,e,a)},d(t){t&&i(e)}}}function ft(o){let e,t;return{c(){e=f("div"),t=U(`
                        Generando...`),this.h()},l(a){e=u(a,"DIV",{class:!0}),p(e).forEach(i),t=S(a,`
                        Generando...`),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-green-600 rounded-full mr-2")},m(a,c){re(a,e,c),re(a,t,c)},d(a){a&&(i(e),i(t))}}}function Oe(o,e){let t,a,c,d=e[27].vehicle_appraisal_id+"",m,w,D,x=(e[27].cert||"N/A")+"",b,T,L,_=Fe(e[27].fecha)+"",v,y,C,A=e[27].cliente+"",Y,W,H,J=e[27].vehiculo+"",K,j,Z,te=e[27].placa+"",Q,h,s,k=Re(e[27].valor)+"",z,B,O,$=e[27].color+"",F,se,ee,X,q,g,V,P,oe,G,le;function fe(E,n){return E[7]&&E[8]===E[27].vehicle_appraisal_id?ft:ut}let ce=fe(e),ae=ce(e);function ne(){return e[15](e[27])}return{key:o,first:null,c(){t=f("tr"),a=f("td"),c=U("#"),m=U(d),w=I(),D=f("td"),b=U(x),T=I(),L=f("td"),v=U(_),y=I(),C=f("td"),Y=U(A),W=I(),H=f("td"),K=U(J),j=I(),Z=f("td"),Q=U(te),h=I(),s=f("td"),z=U(k),B=I(),O=f("td"),F=U($),se=I(),ee=f("td"),X=f("a"),q=U("Editar"),V=I(),P=f("button"),ae.c(),oe=I(),this.h()},l(E){t=u(E,"TR",{class:!0});var n=p(t);a=u(n,"TD",{class:!0});var R=p(a);c=S(R,"#"),m=S(R,d),R.forEach(i),w=N(n),D=u(n,"TD",{class:!0});var M=p(D);b=S(M,x),M.forEach(i),T=N(n),L=u(n,"TD",{class:!0});var pe=p(L);v=S(pe,_),pe.forEach(i),y=N(n),C=u(n,"TD",{class:!0});var we=p(C);Y=S(we,A),we.forEach(i),W=N(n),H=u(n,"TD",{class:!0});var ve=p(H);K=S(ve,J),ve.forEach(i),j=N(n),Z=u(n,"TD",{class:!0});var xe=p(Z);Q=S(xe,te),xe.forEach(i),h=N(n),s=u(n,"TD",{class:!0});var de=p(s);z=S(de,k),de.forEach(i),B=N(n),O=u(n,"TD",{class:!0});var ke=p(O);F=S(ke,$),ke.forEach(i),se=N(n),ee=u(n,"TD",{class:!0});var _e=p(ee);X=u(_e,"A",{href:!0,class:!0});var Ee=p(X);q=S(Ee,"Editar"),Ee.forEach(i),V=N(_e),P=u(_e,"BUTTON",{class:!0});var Ce=p(P);ae.l(Ce),Ce.forEach(i),_e.forEach(i),oe=N(n),n.forEach(i),this.h()},h(){r(a,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),r(D,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),r(L,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(C,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(H,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(Z,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(s,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(O,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(X,"href",g=`/avaluos/${e[27].vehicle_appraisal_id}/editar`),r(X,"class","text-indigo-600 hover:text-indigo-900 mr-3"),r(P,"class","text-green-600 hover:text-green-900 bg-transparent border-none p-0 cursor-pointer text-sm font-medium inline-flex items-center"),P.disabled=e[7],r(ee,"class","px-6 py-4 whitespace-nowrap text-right text-sm font-medium"),r(t,"class","hover:bg-gray-50"),this.first=t},m(E,n){re(E,t,n),l(t,a),l(a,c),l(a,m),l(t,w),l(t,D),l(D,b),l(t,T),l(t,L),l(L,v),l(t,y),l(t,C),l(C,Y),l(t,W),l(t,H),l(H,K),l(t,j),l(t,Z),l(Z,Q),l(t,h),l(t,s),l(s,z),l(t,B),l(t,O),l(O,F),l(t,se),l(t,ee),l(ee,X),l(X,q),l(ee,V),l(ee,P),ae.m(P,null),l(t,oe),G||(le=he(P,"click",ne),G=!0)},p(E,n){e=E,n&64&&d!==(d=e[27].vehicle_appraisal_id+"")&&ie(m,d),n&64&&x!==(x=(e[27].cert||"N/A")+"")&&ie(b,x),n&64&&_!==(_=Fe(e[27].fecha)+"")&&ie(v,_),n&64&&A!==(A=e[27].cliente+"")&&ie(Y,A),n&64&&J!==(J=e[27].vehiculo+"")&&ie(K,J),n&64&&te!==(te=e[27].placa+"")&&ie(Q,te),n&64&&k!==(k=Re(e[27].valor)+"")&&ie(z,k),n&64&&$!==($=e[27].color+"")&&ie(F,$),n&64&&g!==(g=`/avaluos/${e[27].vehicle_appraisal_id}/editar`)&&r(X,"href",g),ce!==(ce=fe(e))&&(ae.d(1),ae=ce(e),ae&&(ae.c(),ae.m(P,null))),n&128&&(P.disabled=e[7])},d(E){E&&i(t),ae.d(),G=!1,le()}}}function je(o){let e,t,a,c,d,m,w,D,x,b,T,L,_,v,y,C=(o[4]-1)*me+1+"",A,Y,W,H=Math.min(o[4]*me,o[2].length)+"",J,K,j,Z=o[2].length+"",te,Q,h,s,k,z,B,O="Anterior",$,F,se,ee,X,q,g,V,P="Siguiente",oe,G,le,fe,ce,ae,ne=Ne(Array(o[5])),E=[];for(let n=0;n<ne.length;n+=1)E[n]=qe(Ue(o,ne,n));return{c(){e=f("div"),t=f("div"),a=f("button"),c=U("Anterior"),m=I(),w=f("button"),D=U("Siguiente"),b=I(),T=f("div"),L=f("div"),_=f("p"),v=U("Mostrando "),y=f("span"),A=U(C),Y=U(" a "),W=f("span"),J=U(H),K=U(" de "),j=f("span"),te=U(Z),Q=U(" resultados"),h=I(),s=f("div"),k=f("nav"),z=f("button"),B=f("span"),B.textContent=O,$=I(),F=ye("svg"),se=ye("path"),X=I();for(let n=0;n<E.length;n+=1)E[n].c();q=I(),g=f("button"),V=f("span"),V.textContent=P,oe=I(),G=ye("svg"),le=ye("path"),this.h()},l(n){e=u(n,"DIV",{class:!0});var R=p(e);t=u(R,"DIV",{class:!0});var M=p(t);a=u(M,"BUTTON",{class:!0});var pe=p(a);c=S(pe,"Anterior"),pe.forEach(i),m=N(M),w=u(M,"BUTTON",{class:!0});var we=p(w);D=S(we,"Siguiente"),we.forEach(i),M.forEach(i),b=N(R),T=u(R,"DIV",{class:!0});var ve=p(T);L=u(ve,"DIV",{});var xe=p(L);_=u(xe,"P",{class:!0});var de=p(_);v=S(de,"Mostrando "),y=u(de,"SPAN",{class:!0});var ke=p(y);A=S(ke,C),ke.forEach(i),Y=S(de," a "),W=u(de,"SPAN",{class:!0});var _e=p(W);J=S(_e,H),_e.forEach(i),K=S(de," de "),j=u(de,"SPAN",{class:!0});var Ee=p(j);te=S(Ee,Z),Ee.forEach(i),Q=S(de," resultados"),de.forEach(i),xe.forEach(i),h=N(ve),s=u(ve,"DIV",{});var Ce=p(s);k=u(Ce,"NAV",{class:!0,"aria-label":!0});var ge=p(k);z=u(ge,"BUTTON",{class:!0});var Te=p(z);B=u(Te,"SPAN",{class:!0,"data-svelte-h":!0}),ue(B)!=="svelte-3d5p0z"&&(B.textContent=O),$=N(Te),F=be(Te,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var ze=p(F);se=be(ze,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(se).forEach(i),ze.forEach(i),Te.forEach(i),X=N(ge);for(let Le=0;Le<E.length;Le+=1)E[Le].l(ge);q=N(ge),g=u(ge,"BUTTON",{class:!0});var Ae=p(g);V=u(Ae,"SPAN",{class:!0,"data-svelte-h":!0}),ue(V)!=="svelte-1cb4ocm"&&(V.textContent=P),oe=N(Ae),G=be(Ae,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var Be=p(G);le=be(Be,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(le).forEach(i),Be.forEach(i),Ae.forEach(i),ge.forEach(i),Ce.forEach(i),ve.forEach(i),R.forEach(i),this.h()},h(){a.disabled=d=o[4]===1,r(a,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),w.disabled=x=o[4]===o[5],r(w,"class","ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(t,"class","flex-1 flex justify-between sm:hidden"),r(y,"class","font-medium"),r(W,"class","font-medium"),r(j,"class","font-medium"),r(_,"class","text-sm text-gray-700"),r(B,"class","sr-only"),r(se,"fill-rule","evenodd"),r(se,"d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"),r(se,"clip-rule","evenodd"),r(F,"class","h-5 w-5"),r(F,"xmlns","http://www.w3.org/2000/svg"),r(F,"viewBox","0 0 20 20"),r(F,"fill","currentColor"),r(F,"aria-hidden","true"),z.disabled=ee=o[4]===1,r(z,"class","relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(V,"class","sr-only"),r(le,"fill-rule","evenodd"),r(le,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),r(le,"clip-rule","evenodd"),r(G,"class","h-5 w-5"),r(G,"xmlns","http://www.w3.org/2000/svg"),r(G,"viewBox","0 0 20 20"),r(G,"fill","currentColor"),r(G,"aria-hidden","true"),g.disabled=fe=o[4]===o[5],r(g,"class","relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(k,"class","relative z-0 inline-flex rounded-md shadow-sm -space-x-px"),r(k,"aria-label","Pagination"),r(T,"class","hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"),r(e,"class","px-6 py-4 flex items-center justify-between border-t border-gray-200")},m(n,R){re(n,e,R),l(e,t),l(t,a),l(a,c),l(t,m),l(t,w),l(w,D),l(e,b),l(e,T),l(T,L),l(L,_),l(_,v),l(_,y),l(y,A),l(_,Y),l(_,W),l(W,J),l(_,K),l(_,j),l(j,te),l(_,Q),l(T,h),l(T,s),l(s,k),l(k,z),l(z,B),l(z,$),l(z,F),l(F,se),l(k,X);for(let M=0;M<E.length;M+=1)E[M]&&E[M].m(k,null);l(k,q),l(k,g),l(g,V),l(g,oe),l(g,G),l(G,le),ce||(ae=[he(a,"click",o[16]),he(w,"click",o[17]),he(z,"click",o[18]),he(g,"click",o[20])],ce=!0)},p(n,R){if(R&16&&d!==(d=n[4]===1)&&(a.disabled=d),R&48&&x!==(x=n[4]===n[5])&&(w.disabled=x),R&16&&C!==(C=(n[4]-1)*me+1+"")&&ie(A,C),R&20&&H!==(H=Math.min(n[4]*me,n[2].length)+"")&&ie(J,H),R&4&&Z!==(Z=n[2].length+"")&&ie(te,Z),R&16&&ee!==(ee=n[4]===1)&&(z.disabled=ee),R&2096){ne=Ne(Array(n[5]));let M;for(M=0;M<ne.length;M+=1){const pe=Ue(n,ne,M);E[M]?E[M].p(pe,R):(E[M]=qe(pe),E[M].c(),E[M].m(k,q))}for(;M<E.length;M+=1)E[M].d(1);E.length=ne.length}R&48&&fe!==(fe=n[4]===n[5])&&(g.disabled=fe)},d(n){n&&i(e),lt(E,n),ce=!1,Ge(ae)}}}function ht(o){let e,t=`...
                      `;return{c(){e=f("span"),e.textContent=t,this.h()},l(a){e=u(a,"SPAN",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-mgxcbc"&&(e.textContent=t),this.h()},h(){r(e,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700")},m(a,c){re(a,e,c)},p:Ie,d(a){a&&i(e)}}}function pt(o){let e,t=o[26]+1+"",a,c,d,m,w;function D(){return o[19](o[26])}return{c(){e=f("button"),a=U(t),c=I(),this.h()},l(x){e=u(x,"BUTTON",{class:!0});var b=p(e);a=S(b,t),c=N(b),b.forEach(i),this.h()},h(){r(e,"class",d="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium "+(o[4]===o[26]+1?"text-blue-600 bg-blue-50":"text-gray-700 hover:bg-gray-50"))},m(x,b){re(x,e,b),l(e,a),l(e,c),m||(w=he(e,"click",D),m=!0)},p(x,b){o=x,b&16&&d!==(d="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium "+(o[4]===o[26]+1?"text-blue-600 bg-blue-50":"text-gray-700 hover:bg-gray-50"))&&r(e,"class",d)},d(x){x&&i(e),m=!1,w()}}}function qe(o){let e;function t(d,m){if(d[26]+1===d[4]||d[26]+1===1||d[26]+1===d[5]||d[26]+1>=d[4]-1&&d[26]+1<=d[4]+1)return pt;if(d[26]+1===d[4]-2||d[26]+1===d[4]+2)return ht}let a=t(o),c=a&&a(o);return{c(){c&&c.c(),e=De()},l(d){c&&c.l(d),e=De()},m(d,m){c&&c.m(d,m),re(d,e,m)},p(d,m){a===(a=t(d))&&c?c.p(d,m):(c&&c.d(1),c=a&&a(d),c&&(c.c(),c.m(e.parentNode,e)))},d(d){d&&i(e),c&&c.d(d)}}}function vt(o){let e,t,a,c,d,m,w="Gestión de Avalúos",D,x,b,T,L,_,v=o[3]?"Actualizando...":"Actualizar",y,C,A,Y=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
          Nuevo Avalúo`,W,H,J,K,j,Z="Buscar Avalúos",te,Q,h,s,k,z='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg>',B,O,$,F,se;t=new at({props:{user:o[0]}});function ee(g,V){return g[3]?dt:g[2].length===0?ct:g[6].length===0&&g[2].length>0?it:ot}let X=ee(o),q=X(o);return{c(){e=f("div"),et(t.$$.fragment),a=I(),c=f("main"),d=f("div"),m=f("h1"),m.textContent=w,D=I(),x=f("div"),b=f("button"),T=ye("svg"),L=ye("path"),_=I(),y=U(v),C=I(),A=f("button"),A.innerHTML=Y,W=I(),H=f("div"),J=f("div"),K=f("div"),j=f("label"),j.textContent=Z,te=I(),Q=f("div"),h=f("input"),s=I(),k=f("div"),k.innerHTML=z,B=I(),O=f("div"),q.c(),this.h()},l(g){e=u(g,"DIV",{class:!0});var V=p(e);$e(t.$$.fragment,V),a=N(V),c=u(V,"MAIN",{class:!0});var P=p(c);d=u(P,"DIV",{class:!0});var oe=p(d);m=u(oe,"H1",{class:!0,"data-svelte-h":!0}),ue(m)!=="svelte-1psqzro"&&(m.textContent=w),D=N(oe),x=u(oe,"DIV",{class:!0});var G=p(x);b=u(G,"BUTTON",{class:!0});var le=p(b);T=be(le,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var fe=p(T);L=be(fe,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(L).forEach(i),fe.forEach(i),_=N(le),y=S(le,v),le.forEach(i),C=N(G),A=u(G,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(A)!=="svelte-fqaqf8"&&(A.innerHTML=Y),G.forEach(i),oe.forEach(i),W=N(P),H=u(P,"DIV",{class:!0});var ce=p(H);J=u(ce,"DIV",{class:!0});var ae=p(J);K=u(ae,"DIV",{class:!0});var ne=p(K);j=u(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(j)!=="svelte-1rufmzp"&&(j.textContent=Z),te=N(ne),Q=u(ne,"DIV",{class:!0});var E=p(Q);h=u(E,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),s=N(E),k=u(E,"DIV",{class:!0,"data-svelte-h":!0}),ue(k)!=="svelte-198uqly"&&(k.innerHTML=z),E.forEach(i),ne.forEach(i),ae.forEach(i),ce.forEach(i),B=N(P),O=u(P,"DIV",{class:!0});var n=p(O);q.l(n),n.forEach(i),P.forEach(i),V.forEach(i),this.h()},h(){r(m,"class","text-2xl font-bold text-gray-800"),r(L,"fill-rule","evenodd"),r(L,"d","M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"),r(L,"clip-rule","evenodd"),r(T,"xmlns","http://www.w3.org/2000/svg"),r(T,"class","h-5 w-5 mr-2"),r(T,"viewBox","0 0 20 20"),r(T,"fill","currentColor"),b.disabled=o[3],r(b,"class","bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"),r(A,"class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"),r(x,"class","flex gap-2"),r(d,"class","flex justify-between items-center mb-6"),r(j,"for","search"),r(j,"class","block text-sm font-medium text-gray-700 mb-1"),r(h,"id","search"),r(h,"type","text"),r(h,"placeholder","Buscar por cliente, vehículo, placa, color, VIN, número de certificado o cert..."),r(h,"class","w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10"),r(k,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),r(Q,"class","relative"),r(K,"class","flex-1"),r(J,"class","flex flex-col md:flex-row gap-4"),r(H,"class","bg-white rounded-lg shadow p-4 mb-6"),r(O,"class","bg-white rounded-lg shadow overflow-hidden max-w-full"),r(c,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"),r(e,"class","min-h-screen bg-gray-50")},m(g,V){re(g,e,V),Ze(t,e,null),l(e,a),l(e,c),l(c,d),l(d,m),l(d,D),l(d,x),l(x,b),l(b,T),l(T,L),l(b,_),l(b,y),l(x,C),l(x,A),l(c,W),l(c,H),l(H,J),l(J,K),l(K,j),l(K,te),l(K,Q),l(Q,h),Pe(h,o[1]),l(Q,s),l(Q,k),l(c,B),l(c,O),q.m(O,null),$=!0,F||(se=[he(b,"click",o[9]),he(A,"click",o[12]),he(h,"input",o[14]),he(h,"input",o[10])],F=!0)},p(g,[V]){const P={};V&1&&(P.user=g[0]),t.$set(P),(!$||V&8)&&v!==(v=g[3]?"Actualizando...":"Actualizar")&&ie(y,v),(!$||V&8)&&(b.disabled=g[3]),V&2&&h.value!==g[1]&&Pe(h,g[1]),X===(X=ee(g))&&q?q.p(g,V):(q.d(1),q=X(g),q&&(q.c(),q.m(O,null)))},i(g){$||(Xe(t.$$.fragment,g),$=!0)},o(g){We(t.$$.fragment,g),$=!1},d(g){g&&i(e),Ye(t),q.d(),F=!1,Ge(se)}}}let me=10;function Re(o){return new Intl.NumberFormat("es-CR",{style:"currency",currency:"CRC"}).format(o)}function Fe(o){if(!o)return"";const e=new Date(o);return isNaN(e.getTime())?"":new Intl.DateTimeFormat("es-CR",{year:"numeric",month:"short",day:"numeric"}).format(e)}function _t(o,e,t){let a=null,c="",d=[],m=[],w=!0,D=1,x=0,b=[],T=!1,L=null;async function _(){try{t(3,w=!0),d=(await nt(Se.AVALUOS.getAll)).map(s=>({id:s.id,vehicle_appraisal_id:s.vehicle_appraisal_id||s.id,fecha:s.appraisal_date||"",cliente:s.applicant||"",vehiculo:`${s.brand||""} ${s.vehicle_description||""} ${s.model_year||""}`.trim(),placa:s.plate_number||"",valor:s.appraisal_value_trochez,color:s.color||"",kilometraje:s.mileage||"",combustible:s.fuel_type||"",motor:s.engine_size||"",propietario:s.owner||"",valorUSD:s.appraisal_value_usd,vin:s.vin||"",numeroMotor:s.engine_number||"",notas:s.notes||"",validezDias:s.validity_days,validezKms:s.validity_kms,extras:s.extras||"",deduccion:s.deductions||"",cert:s.cert||""})),t(2,m=[...d]),y()}catch(h){let s="Error al cargar los avalúos.";h.status===401?(s="Error de autenticación. Por favor, inicie sesión nuevamente.",setTimeout(()=>Me("/login"),2e3)):h.message&&(s+=" "+h.message),alert(s)}finally{t(3,w=!1)}}tt(async()=>{const h=localStorage.getItem("userData");if(h)try{t(0,a=JSON.parse(h))}catch{}await _();const s=()=>{document.hidden||_()};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)}});function v(){if(!c.trim())t(2,m=[...d]);else{const h=c.toLowerCase();t(2,m=d.filter(s=>s.cliente&&s.cliente.toLowerCase().includes(h)||s.vehiculo&&s.vehiculo.toLowerCase().includes(h)||s.placa&&s.placa.toLowerCase().includes(h)||s.color&&s.color.toLowerCase().includes(h)||s.vin&&s.vin.toLowerCase().includes(h)||s.vehicle_appraisal_id&&s.vehicle_appraisal_id.toString().includes(h)||s.cert&&s.cert.toLowerCase().includes(h)))}t(4,D=1),y()}function y(){t(5,x=Math.ceil(m.length/me)),C()}function C(){const h=(D-1)*me,s=h+me;t(6,b=m.slice(h,s))}function A(h){h>=1&&h<=x&&(t(4,D=h),C())}function Y(){Me("/avaluos/nuevo")}async function W(h){try{const s=localStorage.getItem("jwtToken");if(!s){alert("No se encontró token de autenticación. Por favor inicie sesión nuevamente."),setTimeout(()=>Me("/login"),1e3);return}t(7,T=!0),t(8,L=h);const k=await fetch(Se.CERTIFICADOS.get(h),{method:"GET",headers:{Authorization:`Bearer ${s}`}});if(!k.ok)throw new Error(`Error al obtener el certificado: ${k.status} ${k.statusText}`);const z=k.headers.get("content-type");if(z&&z.includes("application/pdf")){const B=await k.blob(),O=window.URL.createObjectURL(B);window.open(O,"_blank")}else if(z&&z.includes("application/json")){const B=await k.json();if(B.url)window.open(B.url,"_blank");else throw new Error(B.message||"Error al generar el certificado")}else{const B=await k.blob(),O=window.URL.createObjectURL(B);window.open(O,"_blank")}}catch(s){alert(`Error al obtener el certificado: ${s.message}`)}finally{t(7,T=!1),t(8,L=null)}}function H(){c=this.value,t(1,c)}return[a,c,m,w,D,x,b,T,L,_,v,A,Y,W,H,h=>W(h.vehicle_appraisal_id),()=>A(D-1),()=>A(D+1),()=>A(D-1),h=>A(h+1),()=>A(D+1)]}class xt extends Je{constructor(e){super(),Ke(this,e,_t,vt,Qe,{})}}export{xt as component};
