import{S as Lt,i as Bt,s as St,d as o,p as zt,B as Ot,q as Mt,r as Ut,a as _e,L as ke,b as q,v as jt,c as l,C as pe,w as r,e as i,f as d,x as Rt,h as I,y as Y,E as Ae,g as R,j as c,z as Ht,k as A,F as Ne,t as H,A as qt,M as yt,n as tt,N as ct,G as $e,D as Ft,O as Ze,P as wt}from"../chunks/CnbjcvQe.js";import{N as Gt,e as et,u as Jt,d as Kt}from"../chunks/BKELNo4D.js";import"../chunks/IHki7fMi.js";import{g as dt}from"../chunks/Brl5YFAa.js";import{A as xt,a as Qt}from"../chunks/BDh5lRBQ.js";function kt(s,e,t){const a=s.slice();return a[33]=e[t],a}function Et(s,e,t){const a=s.slice();return a[36]=e[t],a}function Yt(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(a){e=Ae(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var n=d(e);t=Ae(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),d(t).forEach(o),n.forEach(o),this.h()},h(){r(t,"fill-rule","evenodd"),r(t,"d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"),r(t,"clip-rule","evenodd"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","h-5 w-5 text-gray-400"),r(e,"viewBox","0 0 20 20"),r(e,"fill","currentColor")},m(a,n){q(a,e,n),l(e,t)},d(a){a&&o(e)}}}function Wt(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){r(e,"class","animate-spin h-5 w-5 border-b-2 border-blue-600 rounded-full")},m(t,a){q(t,e,a)},d(t){t&&o(e)}}}function Xt(s){let e,t,a,n='<tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No. Certificado</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vehículo</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Placa</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Color</th> <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th></tr>',u,y,b=[],O=new Map,E,h,V=et(s[9]);const T=p=>p[36].vehicle_appraisal_id;for(let p=0;p<V.length;p+=1){let C=Et(s,V,p),N=T(C);O.set(N,b[p]=Ct(N,C))}let k=s[7]>1&&Tt(s);return{c(){e=c("div"),t=c("table"),a=c("thead"),a.innerHTML=n,u=A(),y=c("tbody");for(let p=0;p<b.length;p+=1)b[p].c();E=A(),k&&k.c(),h=$e(),this.h()},l(p){e=i(p,"DIV",{class:!0,style:!0});var C=d(e);t=i(C,"TABLE",{class:!0,style:!0});var N=d(t);a=i(N,"THEAD",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-mi2392"&&(a.innerHTML=n),u=I(N),y=i(N,"TBODY",{class:!0});var P=d(y);for(let D=0;D<b.length;D+=1)b[D].l(P);P.forEach(o),N.forEach(o),C.forEach(o),E=I(p),k&&k.l(p),h=$e(),this.h()},h(){r(a,"class","bg-gray-50"),r(y,"class","bg-white divide-y divide-gray-200"),r(t,"class","min-w-full divide-y divide-gray-200"),ct(t,"min-width","900px"),r(e,"class","overflow-x-auto shadow ring-1 ring-black ring-opacity-5 md:rounded-lg svelte-ymzynl"),ct(e,"scrollbar-width","thin"),ct(e,"scrollbar-color","#d1d5db #f3f4f6")},m(p,C){q(p,e,C),l(e,t),l(t,a),l(t,u),l(t,y);for(let N=0;N<b.length;N+=1)b[N]&&b[N].m(y,null);q(p,E,C),k&&k.m(p,C),q(p,h,C)},p(p,C){C[0]&134656&&(V=et(p[9]),b=Jt(b,C,T,1,p,V,O,y,Kt,Ct,null,Et)),p[7]>1?k?k.p(p,C):(k=Tt(p),k.c(),k.m(h.parentNode,h)):k&&(k.d(1),k=null)},d(p){p&&(o(e),o(E),o(h));for(let C=0;C<b.length;C+=1)b[C].d();k&&k.d(p)}}}function Zt(s){let e,t="Cargando datos para la página actual...";return{c(){e=c("div"),e.textContent=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1iu9zad"&&(e.textContent=t),this.h()},h(){r(e,"class","p-8 text-center text-gray-500")},m(a,n){q(a,e,n)},p:tt,d(a){a&&o(e)}}}function $t(s){let e,t="No se encontraron avalúos que coincidan con la búsqueda.";return{c(){e=c("div"),e.textContent=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1p5azul"&&(e.textContent=t),this.h()},h(){r(e,"class","p-8 text-center text-gray-500")},m(a,n){q(a,e,n)},p:tt,d(a){a&&o(e)}}}function el(s){let e,t='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1jvpo63"&&(e.innerHTML=t),this.h()},h(){r(e,"class","p-8 flex justify-center")},m(a,n){q(a,e,n)},p:tt,d(a){a&&o(e)}}}function tl(s){let e;return{c(){e=H("Certificado")},l(t){e=R(t,"Certificado")},m(t,a){q(t,e,a)},d(t){t&&o(e)}}}function ll(s){let e,t;return{c(){e=c("div"),t=H(`
                        Generando...`),this.h()},l(a){e=i(a,"DIV",{class:!0}),d(e).forEach(o),t=R(a,`
                        Generando...`),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-green-600 rounded-full mr-2")},m(a,n){q(a,e,n),q(a,t,n)},d(a){a&&(o(e),o(t))}}}function Ct(s,e){let t,a,n,u=e[36].vehicle_appraisal_id+"",y,b,O,E=(e[36].cert||"N/A")+"",h,V,T,k=Vt(e[36].fecha)+"",p,C,N,P=e[36].cliente+"",D,ue,J,U=e[36].vehiculo+"",M,fe,ee,K=e[36].placa+"",S,Z,F,j=Pt(e[36].valor)+"",$,W,te,he=e[36].color+"",ve,se,m,L,B,x,f,w,g,le,ne;function we(X,_){return X[10]&&X[11]===X[36].vehicle_appraisal_id?ll:tl}let ye=we(e),z=ye(e);function oe(){return e[20](e[36])}return{key:s,first:null,c(){t=c("tr"),a=c("td"),n=H("#"),y=H(u),b=A(),O=c("td"),h=H(E),V=A(),T=c("td"),p=H(k),C=A(),N=c("td"),D=H(P),ue=A(),J=c("td"),M=H(U),fe=A(),ee=c("td"),S=H(K),Z=A(),F=c("td"),$=H(j),W=A(),te=c("td"),ve=H(he),se=A(),m=c("td"),L=c("a"),B=H("Editar"),f=A(),w=c("button"),z.c(),g=A(),this.h()},l(X){t=i(X,"TR",{class:!0});var _=d(t);a=i(_,"TD",{class:!0});var Ee=d(a);n=R(Ee,"#"),y=R(Ee,u),Ee.forEach(o),b=I(_),O=i(_,"TD",{class:!0});var me=d(O);h=R(me,E),me.forEach(o),V=I(_),T=i(_,"TD",{class:!0});var Se=d(T);p=R(Se,k),Se.forEach(o),C=I(_),N=i(_,"TD",{class:!0});var be=d(N);D=R(be,P),be.forEach(o),ue=I(_),J=i(_,"TD",{class:!0});var ze=d(J);M=R(ze,U),ze.forEach(o),fe=I(_),ee=i(_,"TD",{class:!0});var Oe=d(ee);S=R(Oe,K),Oe.forEach(o),Z=I(_),F=i(_,"TD",{class:!0});var De=d(F);$=R(De,j),De.forEach(o),W=I(_),te=i(_,"TD",{class:!0});var ie=d(te);ve=R(ie,he),ie.forEach(o),se=I(_),m=i(_,"TD",{class:!0});var ae=d(m);L=i(ae,"A",{href:!0,class:!0});var xe=d(L);B=R(xe,"Editar"),xe.forEach(o),f=I(ae),w=i(ae,"BUTTON",{class:!0});var Me=d(w);z.l(Me),Me.forEach(o),ae.forEach(o),g=I(_),_.forEach(o),this.h()},h(){r(a,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),r(O,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),r(T,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(N,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(J,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(ee,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(F,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(te,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(L,"href",x=`/avaluos/${e[36].vehicle_appraisal_id}/editar`),r(L,"class","text-indigo-600 hover:text-indigo-900 mr-3"),r(w,"class","text-green-600 hover:text-green-900 bg-transparent border-none p-0 cursor-pointer text-sm font-medium inline-flex items-center"),w.disabled=e[10],r(m,"class","px-6 py-4 whitespace-nowrap text-right text-sm font-medium"),r(t,"class","hover:bg-gray-50"),this.first=t},m(X,_){q(X,t,_),l(t,a),l(a,n),l(a,y),l(t,b),l(t,O),l(O,h),l(t,V),l(t,T),l(T,p),l(t,C),l(t,N),l(N,D),l(t,ue),l(t,J),l(J,M),l(t,fe),l(t,ee),l(ee,S),l(t,Z),l(t,F),l(F,$),l(t,W),l(t,te),l(te,ve),l(t,se),l(t,m),l(m,L),l(L,B),l(m,f),l(m,w),z.m(w,null),l(t,g),le||(ne=pe(w,"click",oe),le=!0)},p(X,_){e=X,_[0]&512&&u!==(u=e[36].vehicle_appraisal_id+"")&&_e(y,u),_[0]&512&&E!==(E=(e[36].cert||"N/A")+"")&&_e(h,E),_[0]&512&&k!==(k=Vt(e[36].fecha)+"")&&_e(p,k),_[0]&512&&P!==(P=e[36].cliente+"")&&_e(D,P),_[0]&512&&U!==(U=e[36].vehiculo+"")&&_e(M,U),_[0]&512&&K!==(K=e[36].placa+"")&&_e(S,K),_[0]&512&&j!==(j=Pt(e[36].valor)+"")&&_e($,j),_[0]&512&&he!==(he=e[36].color+"")&&_e(ve,he),_[0]&512&&x!==(x=`/avaluos/${e[36].vehicle_appraisal_id}/editar`)&&r(L,"href",x),ye!==(ye=we(e))&&(z.d(1),z=ye(e),z&&(z.c(),z.m(w,null))),_[0]&1024&&(w.disabled=e[10])},d(X){X&&o(t),z.d(),le=!1,ne()}}}function Tt(s){let e,t,a,n,u="Registros:",y,b,O,E="10",h,V="25",T,k="50",p,C="100",N,P,D,ue,J,U,M,fe,ee,K,S,Z,F,j,$,W,te=(s[5]-1)*s[6]+1+"",he,ve,se,m=Math.min(s[5]*s[6],s[2].length)+"",L,B,x,f,w,g,le,ne,we="Registros:",ye,z,oe,X="10",_,Ee="25",me,Se="50",be,ze="100",Oe,De,ie,ae,xe,Me="Anterior",lt,Re,at,He,ge,Pe,ut="Siguiente",rt,qe,st,ft,ce=s[12]&&Dt(),de=s[12]&&It();function ht(v,Q){return v[12]?rl:al}let Fe=ht(s),Ce=Fe(s),Le=et(Nt(s[7])),re=[];for(let v=0;v<Le.length;v+=1)re[v]=At(kt(s,Le,v));function pt(v,Q){return v[12]?il:ol}let Ge=pt(s),Te=Ge(s);return{c(){e=c("div"),t=c("div"),a=c("div"),n=c("label"),n.textContent=u,y=A(),b=c("select"),O=c("option"),O.textContent=E,h=c("option"),h.textContent=V,T=c("option"),T.textContent=k,p=c("option"),p.textContent=C,N=A(),P=c("div"),D=c("button"),ce&&ce.c(),ue=H(`
                  Anterior`),U=A(),M=c("button"),de&&de.c(),fe=H(`
                  Siguiente`),K=A(),S=c("div"),Z=c("div"),F=c("div"),j=c("p"),$=H("Mostrando "),W=c("span"),he=H(te),ve=H(" a "),se=c("span"),L=H(m),B=H(" de "),x=c("span"),f=H(s[8]),w=H(" resultados"),g=A(),le=c("div"),ne=c("label"),ne.textContent=we,ye=A(),z=c("select"),oe=c("option"),oe.textContent=X,_=c("option"),_.textContent=Ee,me=c("option"),me.textContent=Se,be=c("option"),be.textContent=ze,Oe=A(),De=c("div"),ie=c("nav"),ae=c("button"),xe=c("span"),xe.textContent=Me,lt=A(),Ce.c(),at=A();for(let v=0;v<re.length;v+=1)re[v].c();He=A(),ge=c("button"),Pe=c("span"),Pe.textContent=ut,rt=A(),Te.c(),this.h()},l(v){e=i(v,"DIV",{class:!0});var Q=d(e);t=i(Q,"DIV",{class:!0});var G=d(t);a=i(G,"DIV",{class:!0});var Ve=d(a);n=i(Ve,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(n)!=="svelte-196ea8l"&&(n.textContent=u),y=I(Ve),b=i(Ve,"SELECT",{id:!0,class:!0});var Ue=d(b);O=i(Ue,"OPTION",{"data-svelte-h":!0}),Y(O)!=="svelte-18d3dpq"&&(O.textContent=E),h=i(Ue,"OPTION",{"data-svelte-h":!0}),Y(h)!=="svelte-1ua5rw2"&&(h.textContent=V),T=i(Ue,"OPTION",{"data-svelte-h":!0}),Y(T)!=="svelte-ujtx1y"&&(T.textContent=k),p=i(Ue,"OPTION",{"data-svelte-h":!0}),Y(p)!=="svelte-ic6cau"&&(p.textContent=C),Ue.forEach(o),Ve.forEach(o),N=I(G),P=i(G,"DIV",{class:!0});var Je=d(P);D=i(Je,"BUTTON",{class:!0});var nt=d(D);ce&&ce.l(nt),ue=R(nt,`
                  Anterior`),nt.forEach(o),U=I(Je),M=i(Je,"BUTTON",{class:!0});var ot=d(M);de&&de.l(ot),fe=R(ot,`
                  Siguiente`),ot.forEach(o),Je.forEach(o),G.forEach(o),K=I(Q),S=i(Q,"DIV",{class:!0});var Ke=d(S);Z=i(Ke,"DIV",{class:!0});var Qe=d(Z);F=i(Qe,"DIV",{});var _t=d(F);j=i(_t,"P",{class:!0});var Ie=d(j);$=R(Ie,"Mostrando "),W=i(Ie,"SPAN",{class:!0});var vt=d(W);he=R(vt,te),vt.forEach(o),ve=R(Ie," a "),se=i(Ie,"SPAN",{class:!0});var mt=d(se);L=R(mt,m),mt.forEach(o),B=R(Ie," de "),x=i(Ie,"SPAN",{class:!0});var bt=d(x);f=R(bt,s[8]),bt.forEach(o),w=R(Ie," resultados"),Ie.forEach(o),_t.forEach(o),g=I(Qe),le=i(Qe,"DIV",{class:!0});var Ye=d(le);ne=i(Ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(ne)!=="svelte-1dq8ys2"&&(ne.textContent=we),ye=I(Ye),z=i(Ye,"SELECT",{id:!0,class:!0});var je=d(z);oe=i(je,"OPTION",{"data-svelte-h":!0}),Y(oe)!=="svelte-18d3dpq"&&(oe.textContent=X),_=i(je,"OPTION",{"data-svelte-h":!0}),Y(_)!=="svelte-1ua5rw2"&&(_.textContent=Ee),me=i(je,"OPTION",{"data-svelte-h":!0}),Y(me)!=="svelte-ujtx1y"&&(me.textContent=Se),be=i(je,"OPTION",{"data-svelte-h":!0}),Y(be)!=="svelte-ic6cau"&&(be.textContent=ze),je.forEach(o),Ye.forEach(o),Qe.forEach(o),Oe=I(Ke),De=i(Ke,"DIV",{});var gt=d(De);ie=i(gt,"NAV",{class:!0,"aria-label":!0});var Be=d(ie);ae=i(Be,"BUTTON",{class:!0});var We=d(ae);xe=i(We,"SPAN",{class:!0,"data-svelte-h":!0}),Y(xe)!=="svelte-3d5p0z"&&(xe.textContent=Me),lt=I(We),Ce.l(We),We.forEach(o),at=I(Be);for(let it=0;it<re.length;it+=1)re[it].l(Be);He=I(Be),ge=i(Be,"BUTTON",{class:!0});var Xe=d(ge);Pe=i(Xe,"SPAN",{class:!0,"data-svelte-h":!0}),Y(Pe)!=="svelte-1cb4ocm"&&(Pe.textContent=ut),rt=I(Xe),Te.l(Xe),Xe.forEach(o),Be.forEach(o),gt.forEach(o),Ke.forEach(o),Q.forEach(o),this.h()},h(){r(n,"for","itemsPerPageMobile"),r(n,"class","text-xs text-gray-700"),O.__value=10,ke(O,O.__value),h.__value=25,ke(h,h.__value),T.__value=50,ke(T,T.__value),p.__value=100,ke(p,p.__value),r(b,"id","itemsPerPageMobile"),r(b,"class","px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"),s[6]===void 0&&wt(()=>s[21].call(b)),r(a,"class","flex items-center space-x-2"),D.disabled=J=s[5]===1||s[12],r(D,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),M.disabled=ee=s[5]===s[7]||s[12],r(M,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(P,"class","flex space-x-2"),r(t,"class","flex-1 flex justify-between sm:hidden"),r(W,"class","font-medium"),r(se,"class","font-medium"),r(x,"class","font-medium"),r(j,"class","text-sm text-gray-700"),r(ne,"for","itemsPerPage"),r(ne,"class","text-sm text-gray-700"),oe.__value=10,ke(oe,oe.__value),_.__value=25,ke(_,_.__value),me.__value=50,ke(me,me.__value),be.__value=100,ke(be,be.__value),r(z,"id","itemsPerPage"),r(z,"class","px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"),s[6]===void 0&&wt(()=>s[25].call(z)),r(le,"class","flex items-center space-x-2"),r(Z,"class","flex items-center space-x-4"),r(xe,"class","sr-only"),ae.disabled=Re=s[5]===1||s[12],r(ae,"class","relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(Pe,"class","sr-only"),ge.disabled=qe=s[5]===s[7]||s[12],r(ge,"class","relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(ie,"class","relative z-0 inline-flex rounded-md shadow-sm -space-x-px"),r(ie,"aria-label","Pagination"),r(S,"class","hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"),r(e,"class","px-6 py-4 flex items-center justify-between border-t border-gray-200")},m(v,Q){q(v,e,Q),l(e,t),l(t,a),l(a,n),l(a,y),l(a,b),l(b,O),l(b,h),l(b,T),l(b,p),Ze(b,s[6],!0),l(t,N),l(t,P),l(P,D),ce&&ce.m(D,null),l(D,ue),l(P,U),l(P,M),de&&de.m(M,null),l(M,fe),l(e,K),l(e,S),l(S,Z),l(Z,F),l(F,j),l(j,$),l(j,W),l(W,he),l(j,ve),l(j,se),l(se,L),l(j,B),l(j,x),l(x,f),l(j,w),l(Z,g),l(Z,le),l(le,ne),l(le,ye),l(le,z),l(z,oe),l(z,_),l(z,me),l(z,be),Ze(z,s[6],!0),l(S,Oe),l(S,De),l(De,ie),l(ie,ae),l(ae,xe),l(ae,lt),Ce.m(ae,null),l(ie,at);for(let G=0;G<re.length;G+=1)re[G]&&re[G].m(ie,null);l(ie,He),l(ie,ge),l(ge,Pe),l(ge,rt),Te.m(ge,null),st||(ft=[pe(b,"change",s[21]),pe(b,"change",s[22]),pe(D,"click",s[23]),pe(M,"click",s[24]),pe(z,"change",s[25]),pe(z,"change",s[26]),pe(ae,"click",s[27]),pe(ge,"click",s[29])],st=!0)},p(v,Q){if(Q[0]&64&&Ze(b,v[6]),v[12]?ce||(ce=Dt(),ce.c(),ce.m(D,ue)):ce&&(ce.d(1),ce=null),Q[0]&4128&&J!==(J=v[5]===1||v[12])&&(D.disabled=J),v[12]?de||(de=It(),de.c(),de.m(M,fe)):de&&(de.d(1),de=null),Q[0]&4256&&ee!==(ee=v[5]===v[7]||v[12])&&(M.disabled=ee),Q[0]&96&&te!==(te=(v[5]-1)*v[6]+1+"")&&_e(he,te),Q[0]&100&&m!==(m=Math.min(v[5]*v[6],v[2].length)+"")&&_e(L,m),Q[0]&256&&_e(f,v[8]),Q[0]&64&&Ze(z,v[6]),Fe!==(Fe=ht(v))&&(Ce.d(1),Ce=Fe(v),Ce&&(Ce.c(),Ce.m(ae,null))),Q[0]&4128&&Re!==(Re=v[5]===1||v[12])&&(ae.disabled=Re),Q[0]&37024){Le=et(Nt(v[7]));let G;for(G=0;G<Le.length;G+=1){const Ve=kt(v,Le,G);re[G]?re[G].p(Ve,Q):(re[G]=At(Ve),re[G].c(),re[G].m(ie,He))}for(;G<re.length;G+=1)re[G].d(1);re.length=Le.length}Ge!==(Ge=pt(v))&&(Te.d(1),Te=Ge(v),Te&&(Te.c(),Te.m(ge,null))),Q[0]&4256&&qe!==(qe=v[5]===v[7]||v[12])&&(ge.disabled=qe)},d(v){v&&o(e),ce&&ce.d(),de&&de.d(),Ce.d(),Ft(re,v),Te.d(),st=!1,Ot(ft)}}}function Dt(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full mr-2")},m(t,a){q(t,e,a)},d(t){t&&o(e)}}}function It(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full mr-2")},m(t,a){q(t,e,a)},d(t){t&&o(e)}}}function al(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(a){e=Ae(a,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var n=d(e);t=Ae(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),d(t).forEach(o),n.forEach(o),this.h()},h(){r(t,"fill-rule","evenodd"),r(t,"d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"),r(t,"clip-rule","evenodd"),r(e,"class","h-5 w-5"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"viewBox","0 0 20 20"),r(e,"fill","currentColor"),r(e,"aria-hidden","true")},m(a,n){q(a,e,n),l(e,t)},d(a){a&&o(e)}}}function rl(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full")},m(t,a){q(t,e,a)},d(t){t&&o(e)}}}function sl(s){let e,t=`...
                      `;return{c(){e=c("span"),e.textContent=t,this.h()},l(a){e=i(a,"SPAN",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-mgxcbc"&&(e.textContent=t),this.h()},h(){r(e,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700")},m(a,n){q(a,e,n)},p:tt,d(a){a&&o(e)}}}function nl(s){let e,t=s[33]+"",a,n,u,y,b;function O(){return s[28](s[33])}return{c(){e=c("button"),a=H(t),n=A(),this.h()},l(E){e=i(E,"BUTTON",{class:!0});var h=d(e);a=R(h,t),n=I(h),h.forEach(o),this.h()},h(){e.disabled=s[12],r(e,"class",u="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium "+(s[5]===s[33]?"text-blue-600 bg-blue-50":"text-gray-700 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(E,h){q(E,e,h),l(e,a),l(e,n),y||(b=pe(e,"click",O),y=!0)},p(E,h){s=E,h[0]&128&&t!==(t=s[33]+"")&&_e(a,t),h[0]&4096&&(e.disabled=s[12]),h[0]&160&&u!==(u="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium "+(s[5]===s[33]?"text-blue-600 bg-blue-50":"text-gray-700 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&r(e,"class",u)},d(E){E&&o(e),y=!1,b()}}}function At(s){let e;function t(u,y){if(u[33]===u[5]||u[33]===1||u[33]===u[7]||u[33]>=u[5]-1&&u[33]<=u[5]+1)return nl;if(u[33]===u[5]-2||u[33]===u[5]+2)return sl}let a=t(s),n=a&&a(s);return{c(){n&&n.c(),e=$e()},l(u){n&&n.l(u),e=$e()},m(u,y){n&&n.m(u,y),q(u,e,y)},p(u,y){a===(a=t(u))&&n?n.p(u,y):(n&&n.d(1),n=a&&a(u),n&&(n.c(),n.m(e.parentNode,e)))},d(u){u&&o(e),n&&n.d(u)}}}function ol(s){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(a){e=Ae(a,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var n=d(e);t=Ae(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),d(t).forEach(o),n.forEach(o),this.h()},h(){r(t,"fill-rule","evenodd"),r(t,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),r(t,"clip-rule","evenodd"),r(e,"class","h-5 w-5"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"viewBox","0 0 20 20"),r(e,"fill","currentColor"),r(e,"aria-hidden","true")},m(a,n){q(a,e,n),l(e,t)},d(a){a&&o(e)}}}function il(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full")},m(t,a){q(t,e,a)},d(t){t&&o(e)}}}function cl(s){let e,t,a,n,u,y,b="Gestión de Avalúos",O,E,h,V,T,k,p=s[3]?"Actualizando...":"Actualizar",C,N,P,D=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
          Nuevo Avalúo`,ue,J,U,M,fe="Buscar Avalúos",ee,K,S,Z,F,j,$,W,te,he;t=new Gt({props:{user:s[0]}});function ve(f,w){return f[4]?Wt:Yt}let se=ve(s),m=se(s);function L(f,w){return f[3]?el:f[2].length===0?$t:f[9].length===0&&f[2].length>0?Zt:Xt}let B=L(s),x=B(s);return{c(){e=c("div"),Ht(t.$$.fragment),a=A(),n=c("main"),u=c("div"),y=c("h1"),y.textContent=b,O=A(),E=c("div"),h=c("button"),V=Ne("svg"),T=Ne("path"),k=A(),C=H(p),N=A(),P=c("button"),P.innerHTML=D,ue=A(),J=c("div"),U=c("div"),M=c("label"),M.textContent=fe,ee=A(),K=c("div"),S=c("input"),Z=A(),F=c("div"),m.c(),j=A(),$=c("div"),x.c(),this.h()},l(f){e=i(f,"DIV",{class:!0});var w=d(e);Rt(t.$$.fragment,w),a=I(w),n=i(w,"MAIN",{class:!0});var g=d(n);u=i(g,"DIV",{class:!0});var le=d(u);y=i(le,"H1",{class:!0,"data-svelte-h":!0}),Y(y)!=="svelte-1psqzro"&&(y.textContent=b),O=I(le),E=i(le,"DIV",{class:!0});var ne=d(E);h=i(ne,"BUTTON",{class:!0});var we=d(h);V=Ae(we,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var ye=d(V);T=Ae(ye,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),d(T).forEach(o),ye.forEach(o),k=I(we),C=R(we,p),we.forEach(o),N=I(ne),P=i(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(P)!=="svelte-fqaqf8"&&(P.innerHTML=D),ne.forEach(o),le.forEach(o),ue=I(g),J=i(g,"DIV",{class:!0});var z=d(J);U=i(z,"DIV",{class:!0});var oe=d(U);M=i(oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(M)!=="svelte-1rufmzp"&&(M.textContent=fe),ee=I(oe),K=i(oe,"DIV",{class:!0});var X=d(K);S=i(X,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Z=I(X),F=i(X,"DIV",{class:!0});var _=d(F);m.l(_),_.forEach(o),X.forEach(o),oe.forEach(o),z.forEach(o),j=I(g),$=i(g,"DIV",{class:!0});var Ee=d($);x.l(Ee),Ee.forEach(o),g.forEach(o),w.forEach(o),this.h()},h(){r(y,"class","text-2xl font-bold text-gray-800"),r(T,"fill-rule","evenodd"),r(T,"d","M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"),r(T,"clip-rule","evenodd"),r(V,"xmlns","http://www.w3.org/2000/svg"),r(V,"class","h-5 w-5 mr-2"),r(V,"viewBox","0 0 20 20"),r(V,"fill","currentColor"),h.disabled=s[3],r(h,"class","bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"),r(P,"class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"),r(E,"class","flex gap-2"),r(u,"class","flex justify-between items-center mb-6"),r(M,"for","search"),r(M,"class","block text-sm font-medium text-gray-700 mb-1"),r(S,"id","search"),r(S,"type","text"),r(S,"placeholder","Buscar por placa, cliente, vehículo, VIN, certificado..."),r(S,"class","w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10"),r(F,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),r(K,"class","relative"),r(U,"class","flex-1"),r(J,"class","bg-white rounded-lg shadow p-4 mb-6"),r($,"class","bg-white rounded-lg shadow overflow-hidden max-w-full"),r(n,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"),r(e,"class","min-h-screen bg-gray-50")},m(f,w){q(f,e,w),jt(t,e,null),l(e,a),l(e,n),l(n,u),l(u,y),l(u,O),l(u,E),l(E,h),l(h,V),l(V,T),l(h,k),l(h,C),l(E,N),l(E,P),l(n,ue),l(n,J),l(J,U),l(U,M),l(U,ee),l(U,K),l(K,S),ke(S,s[1]),l(K,Z),l(K,F),m.m(F,null),l(n,j),l(n,$),x.m($,null),W=!0,te||(he=[pe(h,"click",s[18]),pe(P,"click",s[16]),pe(S,"input",s[19]),pe(S,"input",s[14])],te=!0)},p(f,w){const g={};w[0]&1&&(g.user=f[0]),t.$set(g),(!W||w[0]&8)&&p!==(p=f[3]?"Actualizando...":"Actualizar")&&_e(C,p),(!W||w[0]&8)&&(h.disabled=f[3]),w[0]&2&&S.value!==f[1]&&ke(S,f[1]),se!==(se=ve(f))&&(m.d(1),m=se(f),m&&(m.c(),m.m(F,null))),B===(B=L(f))&&x?x.p(f,w):(x.d(1),x=B(f),x&&(x.c(),x.m($,null)))},i(f){W||(Ut(t.$$.fragment,f),W=!0)},o(f){Mt(t.$$.fragment,f),W=!1},d(f){f&&o(e),zt(t),m.d(),x.d(),te=!1,Ot(he)}}}function Nt(s){return Array.from({length:s},(e,t)=>t+1)}function Pt(s){return new Intl.NumberFormat("es-CR",{style:"currency",currency:"CRC"}).format(s)}function Vt(s){if(!s)return"";const e=new Date(s);return isNaN(e.getTime())?"":new Intl.DateTimeFormat("es-CR",{year:"numeric",month:"short",day:"numeric"}).format(e)}function dl(s,e,t){let a=null,n="",u=[],y=[],b=!0,O=null,E=!1,h=1,V=10,T=0,k=0,p=[],C=!1,N=null,P=!1;async function D(m=1,L=""){try{t(3,b=!0);let B,x;L&&L.trim()?(x=new URLSearchParams({query:L.trim(),page:m.toString(),limit:V.toString()}),B=`https://api-backend-trochez.onrender.com/api/appraisals/search?${x}`):(x=new URLSearchParams({page:m.toString(),limit:V.toString()}),B=`${xt.AVALUOS.getAll}?${x}`);const f=await Qt(B);let w;f.data&&f.pagination?(w=f.data,t(8,k=f.pagination.total_count),t(7,T=f.pagination.total_pages)):f.avaluos&&f.total!==void 0?(w=f.avaluos,t(8,k=f.total),t(7,T=f.totalPages||Math.ceil(k/V))):(w=f,t(8,k=w.length),t(7,T=1)),u=w.map(g=>({id:g.id,vehicle_appraisal_id:g.vehicle_appraisal_id||g.id,fecha:g.appraisal_date||"",cliente:g.applicant||"",vehiculo:`${g.brand||""} ${g.vehicle_description||""} ${g.model_year||""}`.trim(),placa:g.plate_number||"",valor:g.appraisal_value_trochez,color:g.color||"",kilometraje:g.mileage||"",combustible:g.fuel_type||"",motor:g.engine_size||"",propietario:g.owner||"",valorUSD:g.appraisal_value_usd,vin:g.vin||"",numeroMotor:g.engine_number||"",notas:g.notes||"",validezDias:g.validity_days,validezKms:g.validity_kms,extras:g.extras||"",deduccion:g.deductions||"",cert:g.cert||""})),t(2,y=[...u]),t(5,h=m),J(),L&&t(2,y=[...u])}catch(B){let x="Error al cargar los avalúos.";B.status===401?(x="Error de autenticación. Por favor, inicie sesión nuevamente.",setTimeout(()=>dt("/login"),2e3)):B.message&&(x+=" "+B.message),alert(x)}finally{t(3,b=!1)}}qt(async()=>{const m=localStorage.getItem("userData");if(m)try{t(0,a=JSON.parse(m))}catch{}await D(1,"");const L=()=>{document.hidden||D(1,n)};return document.addEventListener("visibilitychange",L),()=>{document.removeEventListener("visibilitychange",L)}});function ue(){O&&clearTimeout(O),t(4,E=!0),O=setTimeout(async()=>{t(5,h=1),await D(h,n),t(4,E=!1)},500)}function J(){t(9,p=[...y])}async function U(m){if(m>=1&&m<=T&&!P){t(12,P=!0),t(5,h=m);try{await D(m,n)}finally{t(12,P=!1)}}}function M(){dt("/avaluos/nuevo")}async function fe(m){try{const L=localStorage.getItem("jwtToken");if(!L){alert("No se encontró token de autenticación. Por favor inicie sesión nuevamente."),setTimeout(()=>dt("/login"),1e3);return}t(10,C=!0),t(11,N=m);const B=await fetch(xt.CERTIFICADOS.get(m),{method:"GET",headers:{Authorization:`Bearer ${L}`}});if(!B.ok)throw new Error(`Error al obtener el certificado: ${B.status} ${B.statusText}`);const x=B.headers.get("content-type");if(x&&x.includes("application/pdf")){const f=await B.blob(),w=window.URL.createObjectURL(f);window.open(w,"_blank")}else if(x&&x.includes("application/json")){const f=await B.json();if(f.url)window.open(f.url,"_blank");else throw new Error(f.message||"Error al generar el certificado")}else{const f=await B.blob(),w=window.URL.createObjectURL(f);window.open(w,"_blank")}}catch(L){alert(`Error al obtener el certificado: ${L.message}`)}finally{t(10,C=!1),t(11,N=null)}}const ee=()=>D(1,n);function K(){n=this.value,t(1,n)}const S=m=>fe(m.vehicle_appraisal_id);function Z(){V=yt(this),t(6,V)}const F=()=>D(1,n),j=()=>U(h-1),$=()=>U(h+1);function W(){V=yt(this),t(6,V)}return[a,n,y,b,E,h,V,T,k,p,C,N,P,D,ue,U,M,fe,ee,K,S,Z,F,j,$,W,()=>D(1,n),()=>U(h-1),m=>U(m),()=>U(h+1)]}class vl extends Lt{constructor(e){super(),Bt(this,e,dl,cl,St,{},null,[-1,-1])}}export{vl as component};
