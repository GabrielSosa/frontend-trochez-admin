import{S as Lt,i as Mt,s as Ut,d as o,p as jt,B as mt,q as Ht,r as Rt,a as De,L as Pe,b as R,v as qt,c as r,C as ye,w as l,e as i,f as u,x as Ft,h as A,y as se,E as be,g as oe,j as c,z as Gt,k as I,F as we,t as ne,A as Wt,M as xt,n as ft,N as vt,G as ut,D as Jt,O as it,P as Et}from"../chunks/CnbjcvQe.js";import{N as Kt,e as dt,u as Qt,d as Yt}from"../chunks/Bs4VbhQe.js";import"../chunks/IHki7fMi.js";import{g as Ge}from"../chunks/DA3rruqa.js";import{A as ct,a as Xt}from"../chunks/BDh5lRBQ.js";import{b as Zt,d as $t,s as We,a as Ct,e as Tt}from"../chunks/DfOTljOW.js";function Dt(s,e,t){const a=s.slice();return a[44]=e[t],a}function At(s,e,t){const a=s.slice();return a[47]=e[t],a}function el(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(a){e=be(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var n=u(e);t=be(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),u(t).forEach(o),n.forEach(o),this.h()},h(){l(t,"fill-rule","evenodd"),l(t,"d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"),l(t,"clip-rule","evenodd"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","h-5 w-5 text-gray-400"),l(e,"viewBox","0 0 20 20"),l(e,"fill","currentColor")},m(a,n){R(a,e,n),r(e,t)},d(a){a&&o(e)}}}function tl(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),u(e).forEach(o),this.h()},h(){l(e,"class","animate-spin h-5 w-5 border-b-2 border-blue-600 rounded-full")},m(t,a){R(t,e,a)},d(t){t&&o(e)}}}function ll(s){let e,t,a,n='<tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No. Certificado</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vehículo</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Placa</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Color</th> <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th></tr>',d,x,b=[],U=new Map,D,h,S=dt(s[9]);const V=p=>p[47].vehicle_appraisal_id;for(let p=0;p<S.length;p+=1){let E=At(s,S,p),P=V(E);U.set(P,b[p]=It(P,E))}let C=s[7]>1&&Vt(s);return{c(){e=c("div"),t=c("table"),a=c("thead"),a.innerHTML=n,d=I(),x=c("tbody");for(let p=0;p<b.length;p+=1)b[p].c();D=I(),C&&C.c(),h=ut(),this.h()},l(p){e=i(p,"DIV",{class:!0,style:!0});var E=u(e);t=i(E,"TABLE",{class:!0,style:!0});var P=u(t);a=i(P,"THEAD",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-mi2392"&&(a.innerHTML=n),d=A(P),x=i(P,"TBODY",{class:!0});var B=u(x);for(let L=0;L<b.length;L+=1)b[L].l(B);B.forEach(o),P.forEach(o),E.forEach(o),D=A(p),C&&C.l(p),h=ut(),this.h()},h(){l(a,"class","bg-gray-50"),l(x,"class","bg-white divide-y divide-gray-200"),l(t,"class","min-w-full divide-y divide-gray-200"),vt(t,"min-width","900px"),l(e,"class","overflow-x-auto shadow ring-1 ring-black ring-opacity-5 md:rounded-lg svelte-ymzynl"),vt(e,"scrollbar-width","thin"),vt(e,"scrollbar-color","#d1d5db #f3f4f6")},m(p,E){R(p,e,E),r(e,t),r(t,a),r(t,d),r(t,x);for(let P=0;P<b.length;P+=1)b[P]&&b[P].m(x,null);R(p,D,E),C&&C.m(p,E),R(p,h,E)},p(p,E){E[0]&14806528&&(S=dt(p[9]),b=Qt(b,E,V,1,p,S,U,x,Yt,It,null,At)),p[7]>1?C?C.p(p,E):(C=Vt(p),C.c(),C.m(h.parentNode,h)):C&&(C.d(1),C=null)},d(p){p&&(o(e),o(D),o(h));for(let E=0;E<b.length;E+=1)b[E].d();C&&C.d(p)}}}function al(s){let e,t="Cargando datos para la página actual...";return{c(){e=c("div"),e.textContent=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1iu9zad"&&(e.textContent=t),this.h()},h(){l(e,"class","p-8 text-center text-gray-500")},m(a,n){R(a,e,n)},p:ft,d(a){a&&o(e)}}}function rl(s){let e,t="No se encontraron avalúos que coincidan con la búsqueda.";return{c(){e=c("div"),e.textContent=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1p5azul"&&(e.textContent=t),this.h()},h(){l(e,"class","p-8 text-center text-gray-500")},m(a,n){R(a,e,n)},p:ft,d(a){a&&o(e)}}}function sl(s){let e,t='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1jvpo63"&&(e.innerHTML=t),this.h()},h(){l(e,"class","p-8 flex justify-center")},m(a,n){R(a,e,n)},p:ft,d(a){a&&o(e)}}}function ol(s){let e,t,a;return{c(){e=we("svg"),t=we("path"),a=we("path"),this.h()},l(n){e=be(n,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var d=u(e);t=be(d,"path",{d:!0}),u(t).forEach(o),a=be(d,"path",{d:!0}),u(a).forEach(o),d.forEach(o),this.h()},h(){l(t,"d","M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"),l(a,"d","M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","h-4 w-4"),l(e,"viewBox","0 0 20 20"),l(e,"fill","currentColor")},m(n,d){R(n,e,d),r(e,t),r(e,a)},d(n){n&&o(e)}}}function nl(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),u(e).forEach(o),this.h()},h(){l(e,"class","animate-spin h-4 w-4 border-b-2 border-blue-600 rounded-full")},m(t,a){R(t,e,a)},d(t){t&&o(e)}}}function il(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(a){e=be(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var n=u(e);t=be(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),u(t).forEach(o),n.forEach(o),this.h()},h(){l(t,"fill-rule","evenodd"),l(t,"d","M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z"),l(t,"clip-rule","evenodd"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","h-4 w-4"),l(e,"viewBox","0 0 20 20"),l(e,"fill","currentColor")},m(a,n){R(a,e,n),r(e,t)},d(a){a&&o(e)}}}function cl(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),u(e).forEach(o),this.h()},h(){l(e,"class","animate-spin h-4 w-4 border-b-2 border-green-600 rounded-full")},m(t,a){R(t,e,a)},d(t){t&&o(e)}}}function ul(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(a){e=be(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var n=u(e);t=be(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),u(t).forEach(o),n.forEach(o),this.h()},h(){l(t,"fill-rule","evenodd"),l(t,"d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"),l(t,"clip-rule","evenodd"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","h-4 w-4"),l(e,"viewBox","0 0 20 20"),l(e,"fill","currentColor")},m(a,n){R(a,e,n),r(e,t)},d(a){a&&o(e)}}}function dl(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),u(e).forEach(o),this.h()},h(){l(e,"class","animate-spin h-4 w-4 border-b-2 border-red-600 rounded-full")},m(t,a){R(t,e,a)},d(t){t&&o(e)}}}function It(s,e){let t,a,n,d=e[47].vehicle_appraisal_id+"",x,b,U,D=(e[47].cert||"N/A")+"",h,S,V,C=St(e[47].fecha)+"",p,E,P,B=e[47].cliente+"",L,fe,q,J=e[47].vehiculo+"",T,Ee,ve,F=e[47].placa+"",j,ie,Y,G=Ot(e[47].valor)+"",te,ce,ue,ke=e[47].color+"",Ce,me,K,X,ee,M,w,W,le,he,H,Ae,de,f,g,m,N,z,O;function y(Q,_){return Q[13]&&Q[14]===Q[47].vehicle_appraisal_id?nl:ol}let k=y(e),Ie=k(e);function Je(){return e[26](e[47])}function Se(Q,_){return Q[10]&&Q[11]===Q[47].vehicle_appraisal_id?cl:il}let ge=Se(e),Z=ge(e);function Be(){return e[27](e[47])}function Ke(Q,_){return Q[15]&&Q[16]===Q[47].vehicle_appraisal_id?dl:ul}let Le=Ke(e),xe=Le(e);function Qe(){return e[28](e[47])}return{key:s,first:null,c(){t=c("tr"),a=c("td"),n=ne("#"),x=ne(d),b=I(),U=c("td"),h=ne(D),S=I(),V=c("td"),p=ne(C),E=I(),P=c("td"),L=ne(B),fe=I(),q=c("td"),T=ne(J),Ee=I(),ve=c("td"),j=ne(F),ie=I(),Y=c("td"),te=ne(G),ce=I(),ue=c("td"),Ce=ne(ke),me=I(),K=c("td"),X=c("div"),ee=c("a"),M=we("svg"),w=we("path"),he=I(),H=c("button"),Ie.c(),Ae=I(),de=c("button"),Z.c(),g=I(),m=c("button"),xe.c(),N=I(),this.h()},l(Q){t=i(Q,"TR",{class:!0});var _=u(t);a=i(_,"TD",{class:!0});var Ne=u(a);n=oe(Ne,"#"),x=oe(Ne,d),Ne.forEach(o),b=A(_),U=i(_,"TD",{class:!0});var Ye=u(U);h=oe(Ye,D),Ye.forEach(o),S=A(_),V=i(_,"TD",{class:!0});var Re=u(V);p=oe(Re,C),Re.forEach(o),E=A(_),P=i(_,"TD",{class:!0});var Ue=u(P);L=oe(Ue,B),Ue.forEach(o),fe=A(_),q=i(_,"TD",{class:!0});var qe=u(q);T=oe(qe,J),qe.forEach(o),Ee=A(_),ve=i(_,"TD",{class:!0});var Xe=u(ve);j=oe(Xe,F),Xe.forEach(o),ie=A(_),Y=i(_,"TD",{class:!0});var pe=u(Y);te=oe(pe,G),pe.forEach(o),ce=A(_),ue=i(_,"TD",{class:!0});var _e=u(ue);Ce=oe(_e,ke),_e.forEach(o),me=A(_),K=i(_,"TD",{class:!0});var Ze=u(K);X=i(Ze,"DIV",{class:!0});var Te=u(X);ee=i(Te,"A",{href:!0,class:!0,title:!0});var Ve=u(ee);M=be(Ve,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var ze=u(M);w=be(ze,"path",{d:!0}),u(w).forEach(o),ze.forEach(o),Ve.forEach(o),he=A(Te),H=i(Te,"BUTTON",{class:!0,title:!0});var ae=u(H);Ie.l(ae),ae.forEach(o),Ae=A(Te),de=i(Te,"BUTTON",{class:!0,title:!0});var $e=u(de);Z.l($e),$e.forEach(o),g=A(Te),m=i(Te,"BUTTON",{class:!0,title:!0});var je=u(m);xe.l(je),je.forEach(o),Te.forEach(o),Ze.forEach(o),N=A(_),_.forEach(o),this.h()},h(){l(a,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),l(U,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),l(V,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),l(P,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),l(q,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),l(ve,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),l(Y,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),l(ue,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),l(w,"d","M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"),l(M,"xmlns","http://www.w3.org/2000/svg"),l(M,"class","h-4 w-4"),l(M,"viewBox","0 0 20 20"),l(M,"fill","currentColor"),l(ee,"href",W=`/avaluos/${e[47].vehicle_appraisal_id}/editar`),l(ee,"class",le="p-2 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded-full transition-colors duration-200 "+(e[13]||e[15]||e[10]?"opacity-50 pointer-events-none":"")),l(ee,"title","Editar avalúo"),l(H,"class","p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-full transition-colors duration-200"),H.disabled=e[13],l(H,"title","Duplicar avalúo"),l(de,"class","p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-full transition-colors duration-200"),de.disabled=f=e[10]||e[13]||e[15],l(de,"title","Imprimir certificado"),l(m,"class","p-2 text-red-600 hover:text-red-900 hover:bg-red-50 rounded-full transition-colors duration-200"),m.disabled=e[15],l(m,"title","Eliminar avalúo"),l(X,"class","flex items-center justify-end space-x-2"),l(K,"class","px-6 py-4 whitespace-nowrap text-right text-sm font-medium"),l(t,"class","hover:bg-gray-50"),this.first=t},m(Q,_){R(Q,t,_),r(t,a),r(a,n),r(a,x),r(t,b),r(t,U),r(U,h),r(t,S),r(t,V),r(V,p),r(t,E),r(t,P),r(P,L),r(t,fe),r(t,q),r(q,T),r(t,Ee),r(t,ve),r(ve,j),r(t,ie),r(t,Y),r(Y,te),r(t,ce),r(t,ue),r(ue,Ce),r(t,me),r(t,K),r(K,X),r(X,ee),r(ee,M),r(M,w),r(X,he),r(X,H),Ie.m(H,null),r(X,Ae),r(X,de),Z.m(de,null),r(X,g),r(X,m),xe.m(m,null),r(t,N),z||(O=[ye(H,"click",Je),ye(de,"click",Be),ye(m,"click",Qe)],z=!0)},p(Q,_){e=Q,_[0]&512&&d!==(d=e[47].vehicle_appraisal_id+"")&&De(x,d),_[0]&512&&D!==(D=(e[47].cert||"N/A")+"")&&De(h,D),_[0]&512&&C!==(C=St(e[47].fecha)+"")&&De(p,C),_[0]&512&&B!==(B=e[47].cliente+"")&&De(L,B),_[0]&512&&J!==(J=e[47].vehiculo+"")&&De(T,J),_[0]&512&&F!==(F=e[47].placa+"")&&De(j,F),_[0]&512&&G!==(G=Ot(e[47].valor)+"")&&De(te,G),_[0]&512&&ke!==(ke=e[47].color+"")&&De(Ce,ke),_[0]&512&&W!==(W=`/avaluos/${e[47].vehicle_appraisal_id}/editar`)&&l(ee,"href",W),_[0]&41984&&le!==(le="p-2 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded-full transition-colors duration-200 "+(e[13]||e[15]||e[10]?"opacity-50 pointer-events-none":""))&&l(ee,"class",le),k!==(k=y(e))&&(Ie.d(1),Ie=k(e),Ie&&(Ie.c(),Ie.m(H,null))),_[0]&8192&&(H.disabled=e[13]),ge!==(ge=Se(e))&&(Z.d(1),Z=ge(e),Z&&(Z.c(),Z.m(de,null))),_[0]&41984&&f!==(f=e[10]||e[13]||e[15])&&(de.disabled=f),Le!==(Le=Ke(e))&&(xe.d(1),xe=Le(e),xe&&(xe.c(),xe.m(m,null))),_[0]&32768&&(m.disabled=e[15])},d(Q){Q&&o(t),Ie.d(),Z.d(),xe.d(),z=!1,mt(O)}}}function Vt(s){let e,t,a,n,d="Registros:",x,b,U,D="10",h,S="25",V,C="50",p,E="100",P,B,L,fe,q,J,T,Ee,ve,F,j,ie,Y,G,te,ce,ue=(s[5]-1)*s[6]+1+"",ke,Ce,me,K=Math.min(s[5]*s[6],s[2].length)+"",X,ee,M,w,W,le,he,H,Ae="Registros:",de,f,g,m="10",N,z="25",O,y="50",k,Ie="100",Je,Se,ge,Z,Be,Ke="Anterior",Le,xe,Qe,Q,_,Ne,Ye="Siguiente",Re,Ue,qe,Xe,pe=s[12]&&Nt(),_e=s[12]&&Pt();function Ze(v,re){return v[12]?hl:fl}let Te=Ze(s),Ve=Te(s),ze=dt(zt(s[7])),ae=[];for(let v=0;v<ze.length;v+=1)ae[v]=Bt(Dt(s,ze,v));function $e(v,re){return v[12]?ml:vl}let je=$e(s),Oe=je(s);return{c(){e=c("div"),t=c("div"),a=c("div"),n=c("label"),n.textContent=d,x=I(),b=c("select"),U=c("option"),U.textContent=D,h=c("option"),h.textContent=S,V=c("option"),V.textContent=C,p=c("option"),p.textContent=E,P=I(),B=c("div"),L=c("button"),pe&&pe.c(),fe=ne(`
                  Anterior`),J=I(),T=c("button"),_e&&_e.c(),Ee=ne(`
                  Siguiente`),F=I(),j=c("div"),ie=c("div"),Y=c("div"),G=c("p"),te=ne("Mostrando "),ce=c("span"),ke=ne(ue),Ce=ne(" a "),me=c("span"),X=ne(K),ee=ne(" de "),M=c("span"),w=ne(s[8]),W=ne(" resultados"),le=I(),he=c("div"),H=c("label"),H.textContent=Ae,de=I(),f=c("select"),g=c("option"),g.textContent=m,N=c("option"),N.textContent=z,O=c("option"),O.textContent=y,k=c("option"),k.textContent=Ie,Je=I(),Se=c("div"),ge=c("nav"),Z=c("button"),Be=c("span"),Be.textContent=Ke,Le=I(),Ve.c(),Qe=I();for(let v=0;v<ae.length;v+=1)ae[v].c();Q=I(),_=c("button"),Ne=c("span"),Ne.textContent=Ye,Re=I(),Oe.c(),this.h()},l(v){e=i(v,"DIV",{class:!0});var re=u(e);t=i(re,"DIV",{class:!0});var $=u(t);a=i($,"DIV",{class:!0});var He=u(a);n=i(He,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),se(n)!=="svelte-196ea8l"&&(n.textContent=d),x=A(He),b=i(He,"SELECT",{id:!0,class:!0});var et=u(b);U=i(et,"OPTION",{"data-svelte-h":!0}),se(U)!=="svelte-18d3dpq"&&(U.textContent=D),h=i(et,"OPTION",{"data-svelte-h":!0}),se(h)!=="svelte-1ua5rw2"&&(h.textContent=S),V=i(et,"OPTION",{"data-svelte-h":!0}),se(V)!=="svelte-ujtx1y"&&(V.textContent=C),p=i(et,"OPTION",{"data-svelte-h":!0}),se(p)!=="svelte-ic6cau"&&(p.textContent=E),et.forEach(o),He.forEach(o),P=A($),B=i($,"DIV",{class:!0});var lt=u(B);L=i(lt,"BUTTON",{class:!0});var ht=u(L);pe&&pe.l(ht),fe=oe(ht,`
                  Anterior`),ht.forEach(o),J=A(lt),T=i(lt,"BUTTON",{class:!0});var pt=u(T);_e&&_e.l(pt),Ee=oe(pt,`
                  Siguiente`),pt.forEach(o),lt.forEach(o),$.forEach(o),F=A(re),j=i(re,"DIV",{class:!0});var at=u(j);ie=i(at,"DIV",{class:!0});var rt=u(ie);Y=i(rt,"DIV",{});var gt=u(Y);G=i(gt,"P",{class:!0});var Me=u(G);te=oe(Me,"Mostrando "),ce=i(Me,"SPAN",{class:!0});var bt=u(ce);ke=oe(bt,ue),bt.forEach(o),Ce=oe(Me," a "),me=i(Me,"SPAN",{class:!0});var wt=u(me);X=oe(wt,K),wt.forEach(o),ee=oe(Me," de "),M=i(Me,"SPAN",{class:!0});var yt=u(M);w=oe(yt,s[8]),yt.forEach(o),W=oe(Me," resultados"),Me.forEach(o),gt.forEach(o),le=A(rt),he=i(rt,"DIV",{class:!0});var st=u(he);H=i(st,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),se(H)!=="svelte-1dq8ys2"&&(H.textContent=Ae),de=A(st),f=i(st,"SELECT",{id:!0,class:!0});var tt=u(f);g=i(tt,"OPTION",{"data-svelte-h":!0}),se(g)!=="svelte-18d3dpq"&&(g.textContent=m),N=i(tt,"OPTION",{"data-svelte-h":!0}),se(N)!=="svelte-1ua5rw2"&&(N.textContent=z),O=i(tt,"OPTION",{"data-svelte-h":!0}),se(O)!=="svelte-ujtx1y"&&(O.textContent=y),k=i(tt,"OPTION",{"data-svelte-h":!0}),se(k)!=="svelte-ic6cau"&&(k.textContent=Ie),tt.forEach(o),st.forEach(o),rt.forEach(o),Je=A(at),Se=i(at,"DIV",{});var kt=u(Se);ge=i(kt,"NAV",{class:!0,"aria-label":!0});var Fe=u(ge);Z=i(Fe,"BUTTON",{class:!0});var ot=u(Z);Be=i(ot,"SPAN",{class:!0,"data-svelte-h":!0}),se(Be)!=="svelte-3d5p0z"&&(Be.textContent=Ke),Le=A(ot),Ve.l(ot),ot.forEach(o),Qe=A(Fe);for(let _t=0;_t<ae.length;_t+=1)ae[_t].l(Fe);Q=A(Fe),_=i(Fe,"BUTTON",{class:!0});var nt=u(_);Ne=i(nt,"SPAN",{class:!0,"data-svelte-h":!0}),se(Ne)!=="svelte-1cb4ocm"&&(Ne.textContent=Ye),Re=A(nt),Oe.l(nt),nt.forEach(o),Fe.forEach(o),kt.forEach(o),at.forEach(o),re.forEach(o),this.h()},h(){l(n,"for","itemsPerPageMobile"),l(n,"class","text-xs text-gray-700"),U.__value=10,Pe(U,U.__value),h.__value=25,Pe(h,h.__value),V.__value=50,Pe(V,V.__value),p.__value=100,Pe(p,p.__value),l(b,"id","itemsPerPageMobile"),l(b,"class","px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"),s[6]===void 0&&Et(()=>s[29].call(b)),l(a,"class","flex items-center space-x-2"),L.disabled=q=s[5]===1||s[12],l(L,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),T.disabled=ve=s[5]===s[7]||s[12],l(T,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),l(B,"class","flex space-x-2"),l(t,"class","flex-1 flex justify-between sm:hidden"),l(ce,"class","font-medium"),l(me,"class","font-medium"),l(M,"class","font-medium"),l(G,"class","text-sm text-gray-700"),l(H,"for","itemsPerPage"),l(H,"class","text-sm text-gray-700"),g.__value=10,Pe(g,g.__value),N.__value=25,Pe(N,N.__value),O.__value=50,Pe(O,O.__value),k.__value=100,Pe(k,k.__value),l(f,"id","itemsPerPage"),l(f,"class","px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"),s[6]===void 0&&Et(()=>s[33].call(f)),l(he,"class","flex items-center space-x-2"),l(ie,"class","flex items-center space-x-4"),l(Be,"class","sr-only"),Z.disabled=xe=s[5]===1||s[12],l(Z,"class","relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),l(Ne,"class","sr-only"),_.disabled=Ue=s[5]===s[7]||s[12],l(_,"class","relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),l(ge,"class","relative z-0 inline-flex rounded-md shadow-sm -space-x-px"),l(ge,"aria-label","Pagination"),l(j,"class","hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"),l(e,"class","px-6 py-4 flex items-center justify-between border-t border-gray-200")},m(v,re){R(v,e,re),r(e,t),r(t,a),r(a,n),r(a,x),r(a,b),r(b,U),r(b,h),r(b,V),r(b,p),it(b,s[6],!0),r(t,P),r(t,B),r(B,L),pe&&pe.m(L,null),r(L,fe),r(B,J),r(B,T),_e&&_e.m(T,null),r(T,Ee),r(e,F),r(e,j),r(j,ie),r(ie,Y),r(Y,G),r(G,te),r(G,ce),r(ce,ke),r(G,Ce),r(G,me),r(me,X),r(G,ee),r(G,M),r(M,w),r(G,W),r(ie,le),r(ie,he),r(he,H),r(he,de),r(he,f),r(f,g),r(f,N),r(f,O),r(f,k),it(f,s[6],!0),r(j,Je),r(j,Se),r(Se,ge),r(ge,Z),r(Z,Be),r(Z,Le),Ve.m(Z,null),r(ge,Qe);for(let $=0;$<ae.length;$+=1)ae[$]&&ae[$].m(ge,null);r(ge,Q),r(ge,_),r(_,Ne),r(_,Re),Oe.m(_,null),qe||(Xe=[ye(b,"change",s[29]),ye(b,"change",s[30]),ye(L,"click",s[31]),ye(T,"click",s[32]),ye(f,"change",s[33]),ye(f,"change",s[34]),ye(Z,"click",s[35]),ye(_,"click",s[37])],qe=!0)},p(v,re){if(re[0]&64&&it(b,v[6]),v[12]?pe||(pe=Nt(),pe.c(),pe.m(L,fe)):pe&&(pe.d(1),pe=null),re[0]&4128&&q!==(q=v[5]===1||v[12])&&(L.disabled=q),v[12]?_e||(_e=Pt(),_e.c(),_e.m(T,Ee)):_e&&(_e.d(1),_e=null),re[0]&4256&&ve!==(ve=v[5]===v[7]||v[12])&&(T.disabled=ve),re[0]&96&&ue!==(ue=(v[5]-1)*v[6]+1+"")&&De(ke,ue),re[0]&100&&K!==(K=Math.min(v[5]*v[6],v[2].length)+"")&&De(X,K),re[0]&256&&De(w,v[8]),re[0]&64&&it(f,v[6]),Te!==(Te=Ze(v))&&(Ve.d(1),Ve=Te(v),Ve&&(Ve.c(),Ve.m(Z,null))),re[0]&4128&&xe!==(xe=v[5]===1||v[12])&&(Z.disabled=xe),re[0]&528544){ze=dt(zt(v[7]));let $;for($=0;$<ze.length;$+=1){const He=Dt(v,ze,$);ae[$]?ae[$].p(He,re):(ae[$]=Bt(He),ae[$].c(),ae[$].m(ge,Q))}for(;$<ae.length;$+=1)ae[$].d(1);ae.length=ze.length}je!==(je=$e(v))&&(Oe.d(1),Oe=je(v),Oe&&(Oe.c(),Oe.m(_,null))),re[0]&4256&&Ue!==(Ue=v[5]===v[7]||v[12])&&(_.disabled=Ue)},d(v){v&&o(e),pe&&pe.d(),_e&&_e.d(),Ve.d(),Jt(ae,v),Oe.d(),qe=!1,mt(Xe)}}}function Nt(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),u(e).forEach(o),this.h()},h(){l(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full mr-2")},m(t,a){R(t,e,a)},d(t){t&&o(e)}}}function Pt(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),u(e).forEach(o),this.h()},h(){l(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full mr-2")},m(t,a){R(t,e,a)},d(t){t&&o(e)}}}function fl(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(a){e=be(a,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var n=u(e);t=be(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),u(t).forEach(o),n.forEach(o),this.h()},h(){l(t,"fill-rule","evenodd"),l(t,"d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"),l(t,"clip-rule","evenodd"),l(e,"class","h-5 w-5"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"viewBox","0 0 20 20"),l(e,"fill","currentColor"),l(e,"aria-hidden","true")},m(a,n){R(a,e,n),r(e,t)},d(a){a&&o(e)}}}function hl(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),u(e).forEach(o),this.h()},h(){l(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full")},m(t,a){R(t,e,a)},d(t){t&&o(e)}}}function pl(s){let e,t=`...
                      `;return{c(){e=c("span"),e.textContent=t,this.h()},l(a){e=i(a,"SPAN",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-mgxcbc"&&(e.textContent=t),this.h()},h(){l(e,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700")},m(a,n){R(a,e,n)},p:ft,d(a){a&&o(e)}}}function _l(s){let e,t=s[44]+"",a,n,d,x,b;function U(){return s[36](s[44])}return{c(){e=c("button"),a=ne(t),n=I(),this.h()},l(D){e=i(D,"BUTTON",{class:!0});var h=u(e);a=oe(h,t),n=A(h),h.forEach(o),this.h()},h(){e.disabled=s[12],l(e,"class",d="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium "+(s[5]===s[44]?"text-blue-600 bg-blue-50":"text-gray-700 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(D,h){R(D,e,h),r(e,a),r(e,n),x||(b=ye(e,"click",U),x=!0)},p(D,h){s=D,h[0]&128&&t!==(t=s[44]+"")&&De(a,t),h[0]&4096&&(e.disabled=s[12]),h[0]&160&&d!==(d="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium "+(s[5]===s[44]?"text-blue-600 bg-blue-50":"text-gray-700 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&l(e,"class",d)},d(D){D&&o(e),x=!1,b()}}}function Bt(s){let e;function t(d,x){if(d[44]===d[5]||d[44]===1||d[44]===d[7]||d[44]>=d[5]-1&&d[44]<=d[5]+1)return _l;if(d[44]===d[5]-2||d[44]===d[5]+2)return pl}let a=t(s),n=a&&a(s);return{c(){n&&n.c(),e=ut()},l(d){n&&n.l(d),e=ut()},m(d,x){n&&n.m(d,x),R(d,e,x)},p(d,x){a===(a=t(d))&&n?n.p(d,x):(n&&n.d(1),n=a&&a(d),n&&(n.c(),n.m(e.parentNode,e)))},d(d){d&&o(e),n&&n.d(d)}}}function vl(s){let e,t;return{c(){e=we("svg"),t=we("path"),this.h()},l(a){e=be(a,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var n=u(e);t=be(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),u(t).forEach(o),n.forEach(o),this.h()},h(){l(t,"fill-rule","evenodd"),l(t,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),l(t,"clip-rule","evenodd"),l(e,"class","h-5 w-5"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"viewBox","0 0 20 20"),l(e,"fill","currentColor"),l(e,"aria-hidden","true")},m(a,n){R(a,e,n),r(e,t)},d(a){a&&o(e)}}}function ml(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),u(e).forEach(o),this.h()},h(){l(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full")},m(t,a){R(t,e,a)},d(t){t&&o(e)}}}function gl(s){let e,t,a,n,d,x,b="Gestión de Avalúos",U,D,h,S,V,C,p=s[3]?"Actualizando...":"Actualizar",E,P,B,L=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
          Nuevo Avalúo`,fe,q,J,T,Ee="Buscar Avalúos",ve,F,j,ie,Y,G,te,ce,ue,ke;t=new Kt({props:{user:s[0]}});function Ce(w,W){return w[4]?tl:el}let me=Ce(s),K=me(s);function X(w,W){return w[3]?sl:w[2].length===0?rl:w[9].length===0&&w[2].length>0?al:ll}let ee=X(s),M=ee(s);return{c(){e=c("div"),Gt(t.$$.fragment),a=I(),n=c("main"),d=c("div"),x=c("h1"),x.textContent=b,U=I(),D=c("div"),h=c("button"),S=we("svg"),V=we("path"),C=I(),E=ne(p),P=I(),B=c("button"),B.innerHTML=L,fe=I(),q=c("div"),J=c("div"),T=c("label"),T.textContent=Ee,ve=I(),F=c("div"),j=c("input"),ie=I(),Y=c("div"),K.c(),G=I(),te=c("div"),M.c(),this.h()},l(w){e=i(w,"DIV",{class:!0});var W=u(e);Ft(t.$$.fragment,W),a=A(W),n=i(W,"MAIN",{class:!0});var le=u(n);d=i(le,"DIV",{class:!0});var he=u(d);x=i(he,"H1",{class:!0,"data-svelte-h":!0}),se(x)!=="svelte-1psqzro"&&(x.textContent=b),U=A(he),D=i(he,"DIV",{class:!0});var H=u(D);h=i(H,"BUTTON",{class:!0});var Ae=u(h);S=be(Ae,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var de=u(S);V=be(de,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),u(V).forEach(o),de.forEach(o),C=A(Ae),E=oe(Ae,p),Ae.forEach(o),P=A(H),B=i(H,"BUTTON",{class:!0,"data-svelte-h":!0}),se(B)!=="svelte-fqaqf8"&&(B.innerHTML=L),H.forEach(o),he.forEach(o),fe=A(le),q=i(le,"DIV",{class:!0});var f=u(q);J=i(f,"DIV",{class:!0});var g=u(J);T=i(g,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),se(T)!=="svelte-1rufmzp"&&(T.textContent=Ee),ve=A(g),F=i(g,"DIV",{class:!0});var m=u(F);j=i(m,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),ie=A(m),Y=i(m,"DIV",{class:!0});var N=u(Y);K.l(N),N.forEach(o),m.forEach(o),g.forEach(o),f.forEach(o),G=A(le),te=i(le,"DIV",{class:!0});var z=u(te);M.l(z),z.forEach(o),le.forEach(o),W.forEach(o),this.h()},h(){l(x,"class","text-2xl font-bold text-gray-800"),l(V,"fill-rule","evenodd"),l(V,"d","M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"),l(V,"clip-rule","evenodd"),l(S,"xmlns","http://www.w3.org/2000/svg"),l(S,"class","h-5 w-5 mr-2"),l(S,"viewBox","0 0 20 20"),l(S,"fill","currentColor"),h.disabled=s[3],l(h,"class","bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"),l(B,"class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"),l(D,"class","flex gap-2"),l(d,"class","flex justify-between items-center mb-6"),l(T,"for","search"),l(T,"class","block text-sm font-medium text-gray-700 mb-1"),l(j,"id","search"),l(j,"type","text"),l(j,"placeholder","Buscar por placa, cliente, vehículo, VIN, certificado..."),l(j,"class","w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10"),l(Y,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),l(F,"class","relative"),l(J,"class","flex-1"),l(q,"class","bg-white rounded-lg shadow p-4 mb-6"),l(te,"class","bg-white rounded-lg shadow overflow-hidden max-w-full"),l(n,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"),l(e,"class","min-h-screen bg-gray-50")},m(w,W){R(w,e,W),qt(t,e,null),r(e,a),r(e,n),r(n,d),r(d,x),r(d,U),r(d,D),r(D,h),r(h,S),r(S,V),r(h,C),r(h,E),r(D,P),r(D,B),r(n,fe),r(n,q),r(q,J),r(J,T),r(J,ve),r(J,F),r(F,j),Pe(j,s[1]),r(F,ie),r(F,Y),K.m(Y,null),r(n,G),r(n,te),M.m(te,null),ce=!0,ue||(ke=[ye(h,"click",s[24]),ye(B,"click",s[20]),ye(j,"input",s[25]),ye(j,"input",s[18])],ue=!0)},p(w,W){const le={};W[0]&1&&(le.user=w[0]),t.$set(le),(!ce||W[0]&8)&&p!==(p=w[3]?"Actualizando...":"Actualizar")&&De(E,p),(!ce||W[0]&8)&&(h.disabled=w[3]),W[0]&2&&j.value!==w[1]&&Pe(j,w[1]),me!==(me=Ce(w))&&(K.d(1),K=me(w),K&&(K.c(),K.m(Y,null))),ee===(ee=X(w))&&M?M.p(w,W):(M.d(1),M=ee(w),M&&(M.c(),M.m(te,null)))},i(w){ce||(Rt(t.$$.fragment,w),ce=!0)},o(w){Ht(t.$$.fragment,w),ce=!1},d(w){w&&o(e),jt(t),K.d(),M.d(),ue=!1,mt(ke)}}}function zt(s){return Array.from({length:s},(e,t)=>t+1)}function Ot(s){return new Intl.NumberFormat("es-CR",{style:"currency",currency:"CRC"}).format(s)}function St(s){if(!s)return"";const e=new Date(s);return isNaN(e.getTime())?"":new Intl.DateTimeFormat("es-CR",{year:"numeric",month:"short",day:"numeric"}).format(e)}function bl(s,e,t){let a=null,n="",d=[],x=[],b=!0,U=null,D=!1,h=1,S=10,V=0,C=0,p=[],E=!1,P=null,B=!1,L=!1,fe=null,q=!1,J=null;async function T(f=1,g=""){try{t(3,b=!0);let m,N;g&&g.trim()?(N=new URLSearchParams({query:g.trim(),page:f.toString(),limit:S.toString()}),m=`https://api-backend-trochez.onrender.com/api/appraisals/search?${N}`):(N=new URLSearchParams({page:f.toString(),limit:S.toString()}),m=`${ct.AVALUOS.getAll}?${N}`);const z=await Xt(m);let O;z.data&&z.pagination?(O=z.data,t(8,C=z.pagination.total_count),t(7,V=z.pagination.total_pages)):z.avaluos&&z.total!==void 0?(O=z.avaluos,t(8,C=z.total),t(7,V=z.totalPages||Math.ceil(C/S))):(O=z,t(8,C=O.length),t(7,V=1)),d=O.map(y=>({id:y.id,vehicle_appraisal_id:y.vehicle_appraisal_id||y.id,fecha:y.appraisal_date||"",cliente:y.applicant||"",vehiculo:`${y.brand||""} ${y.vehicle_description||""} ${y.model_year||""}`.trim(),placa:y.plate_number||"",valor:y.appraisal_value_trochez,color:y.color||"",kilometraje:y.mileage||"",combustible:y.fuel_type||"",motor:y.engine_size||"",propietario:y.owner||"",valorUSD:y.appraisal_value_usd,vin:y.vin||"",numeroMotor:y.engine_number||"",notas:y.notes||"",validezDias:y.validity_days,validezKms:y.validity_kms,extras:y.extras||"",deduccion:y.deductions||"",cert:y.cert||""})),t(2,x=[...d]),t(5,h=f),ve(),g&&t(2,x=[...d])}catch(m){let N="Error al cargar los avalúos.";m.status===401?(N="Error de autenticación. Por favor, inicie sesión nuevamente.",setTimeout(()=>Ge("/login"),2e3)):m.message&&(N+=" "+m.message),notifications.error(N)}finally{t(3,b=!1)}}Wt(async()=>{const f=localStorage.getItem("userData");if(f)try{t(0,a=JSON.parse(f))}catch{}await T(1,"");const g=()=>{document.hidden||T(1,n)};return document.addEventListener("visibilitychange",g),()=>{document.removeEventListener("visibilitychange",g)}});function Ee(){U&&clearTimeout(U),t(4,D=!0),U=setTimeout(async()=>{t(5,h=1),await T(h,n),t(4,D=!1)},500)}function ve(){t(9,p=[...x])}async function F(f){if(f>=1&&f<=V&&!B){t(12,B=!0),t(5,h=f);try{await T(f,n)}finally{t(12,B=!1)}}}function j(){Ge("/avaluos/nuevo")}async function ie(f){await Zt()&&Y(f)}async function Y(f){try{t(13,L=!0),t(14,fe=f),te();const g=localStorage.getItem("jwtToken");if(!g){We("No se encontró token de autenticación. Por favor inicie sesión nuevamente."),setTimeout(()=>Ge("/login"),1e3);return}const m=await fetch(`${ct.AVALUOS.getAll}/${f}/duplicate`,{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(!m.ok)throw new Error(`Error al duplicar el avalúo: ${m.status} ${m.statusText}`);const N=await m.json();if(N.vehicle_appraisal_id)Tt("Avalúo duplicado exitosamente"),Ge(`/avaluos/${N.vehicle_appraisal_id}/editar`);else throw new Error("No se recibió el ID del avalúo duplicado")}catch(g){We(`Error al duplicar el avalúo: ${g.message}`),t(13,L=!1),t(14,fe=null)}finally{t(13,L=!1),t(14,fe=null)}}async function G(f){await $t()&&ce(f)}function te(){setTimeout(()=>{q&&(t(15,q=!1),t(16,J=null),console.warn("Reset stuck deleting state")),L&&(t(13,L=!1),t(14,fe=null),console.warn("Reset stuck duplicating state")),E&&(t(10,E=!1),t(11,P=null),console.warn("Reset stuck generating certificate state"))},1e4)}async function ce(f){try{t(15,q=!0),t(16,J=f),te();const g=localStorage.getItem("jwtToken");if(!g){We("No se encontró token de autenticación. Por favor inicie sesión nuevamente."),setTimeout(()=>Ge("/login"),1e3);return}const m=await fetch(`${ct.AVALUOS.getAll}/${f}`,{method:"DELETE",headers:{Authorization:`Bearer ${g}`}});if(!m.ok)throw new Error(`Error al eliminar el avalúo: ${m.status} ${m.statusText}`);await T(h,n),Tt("Avalúo eliminado exitosamente")}catch(g){We(`Error al eliminar el avalúo: ${g.message}`),t(15,q=!1),t(16,J=null)}finally{t(15,q=!1),t(16,J=null)}}async function ue(f){try{const g=localStorage.getItem("jwtToken");if(!g){We("No se encontró token de autenticación. Por favor inicie sesión nuevamente."),setTimeout(()=>Ge("/login"),1e3);return}t(10,E=!0),t(11,P=f),te();const m=await fetch(ct.CERTIFICADOS.get(f),{method:"GET",headers:{Authorization:`Bearer ${g}`}});if(!m.ok)throw new Error(`Error al obtener el certificado: ${m.status} ${m.statusText}`);const N=m.headers.get("content-type");if(N&&N.includes("application/pdf")){const z=await m.blob(),O=window.URL.createObjectURL(z);try{const y=window.open(O,"_blank");if(!y||y.closed||typeof y.closed>"u"){const k=document.createElement("a");k.href=O,k.target="_blank",k.download=`certificado_${f}.pdf`,document.body.appendChild(k),k.click(),document.body.removeChild(k),setTimeout(()=>{Ct("El certificado se está descargando. Si no se abrió automáticamente, revisa tu carpeta de descargas.")},100)}}catch{const k=document.createElement("a");k.href=O,k.download=`certificado_${f}.pdf`,document.body.appendChild(k),k.click(),document.body.removeChild(k),Ct("El certificado se está descargando. Revisa tu carpeta de descargas.")}}else if(N&&N.includes("application/json")){const z=await m.json();if(z.url)try{const O=window.open(z.url,"_blank");(!O||O.closed||typeof O.closed>"u")&&(window.location.href=z.url)}catch{window.location.href=z.url}else throw new Error(z.message||"Error al generar el certificado")}else{const z=await m.blob(),O=window.URL.createObjectURL(z);try{const y=window.open(O,"_blank");if(!y||y.closed||typeof y.closed>"u"){const k=document.createElement("a");k.href=O,k.target="_blank",k.download=`certificado_${f}.pdf`,document.body.appendChild(k),k.click(),document.body.removeChild(k)}}catch{const k=document.createElement("a");k.href=O,k.download=`certificado_${f}.pdf`,document.body.appendChild(k),k.click(),document.body.removeChild(k)}}}catch(g){We(`Error al obtener el certificado: ${g.message}`)}finally{t(10,E=!1),t(11,P=null)}}const ke=()=>T(1,n);function Ce(){n=this.value,t(1,n)}const me=f=>ie(f.vehicle_appraisal_id),K=f=>ue(f.vehicle_appraisal_id),X=f=>G(f.vehicle_appraisal_id);function ee(){S=xt(this),t(6,S)}const M=()=>T(1,n),w=()=>F(h-1),W=()=>F(h+1);function le(){S=xt(this),t(6,S)}return[a,n,x,b,D,h,S,V,C,p,E,P,B,L,fe,q,J,T,Ee,F,j,ie,G,ue,ke,Ce,me,K,X,ee,M,w,W,le,()=>T(1,n),()=>F(h-1),f=>F(f),()=>F(h+1)]}class Tl extends Lt{constructor(e){super(),Mt(this,e,bl,gl,Ut,{},null,[-1,-1])}}export{Tl as component};
