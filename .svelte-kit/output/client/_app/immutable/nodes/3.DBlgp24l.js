import{S as Lt,i as St,s as Bt,d as o,p as zt,B as Ot,q as Mt,r as Ut,a as _e,L as ke,b as F,v as jt,c as l,C as pe,w as r,e as i,f as d,x as Rt,h as N,y as Y,E as Ne,g as H,j as c,z as Ht,k as I,F as Ie,t as q,A as qt,M as yt,n as tt,N as ct,G as $e,D as Ft,O as Ze,P as wt}from"../chunks/CnbjcvQe.js";import{N as Gt,e as et,u as Wt,d as Jt}from"../chunks/Dp1kotmo.js";import"../chunks/IHki7fMi.js";import{g as dt}from"../chunks/CZYdmkq_.js";import{A as xt,a as Kt}from"../chunks/BDh5lRBQ.js";function kt(s,e,t){const a=s.slice();return a[33]=e[t],a}function Et(s,e,t){const a=s.slice();return a[36]=e[t],a}function Qt(s){let e,t;return{c(){e=Ie("svg"),t=Ie("path"),this.h()},l(a){e=Ne(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var n=d(e);t=Ne(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),d(t).forEach(o),n.forEach(o),this.h()},h(){r(t,"fill-rule","evenodd"),r(t,"d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"),r(t,"clip-rule","evenodd"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","h-5 w-5 text-gray-400"),r(e,"viewBox","0 0 20 20"),r(e,"fill","currentColor")},m(a,n){F(a,e,n),l(e,t)},d(a){a&&o(e)}}}function Yt(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){r(e,"class","animate-spin h-5 w-5 border-b-2 border-blue-600 rounded-full")},m(t,a){F(t,e,a)},d(t){t&&o(e)}}}function Xt(s){let e,t,a,n='<tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No. Certificado</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vehículo</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Placa</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Color</th> <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th></tr>',f,x,w=[],L=new Map,C,h,O=et(s[9]);const D=p=>p[36].vehicle_appraisal_id;for(let p=0;p<O.length;p+=1){let T=Et(s,O,p),P=D(T);L.set(P,w[p]=Ct(P,T))}let E=s[7]>1&&Tt(s);return{c(){e=c("div"),t=c("table"),a=c("thead"),a.innerHTML=n,f=I(),x=c("tbody");for(let p=0;p<w.length;p+=1)w[p].c();C=I(),E&&E.c(),h=$e(),this.h()},l(p){e=i(p,"DIV",{class:!0,style:!0});var T=d(e);t=i(T,"TABLE",{class:!0,style:!0});var P=d(t);a=i(P,"THEAD",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-mi2392"&&(a.innerHTML=n),f=N(P),x=i(P,"TBODY",{class:!0});var V=d(x);for(let A=0;A<w.length;A+=1)w[A].l(V);V.forEach(o),P.forEach(o),T.forEach(o),C=N(p),E&&E.l(p),h=$e(),this.h()},h(){r(a,"class","bg-gray-50"),r(x,"class","bg-white divide-y divide-gray-200"),r(t,"class","min-w-full divide-y divide-gray-200"),ct(t,"min-width","900px"),r(e,"class","overflow-x-auto shadow ring-1 ring-black ring-opacity-5 md:rounded-lg svelte-ymzynl"),ct(e,"scrollbar-width","thin"),ct(e,"scrollbar-color","#d1d5db #f3f4f6")},m(p,T){F(p,e,T),l(e,t),l(t,a),l(t,f),l(t,x);for(let P=0;P<w.length;P+=1)w[P]&&w[P].m(x,null);F(p,C,T),E&&E.m(p,T),F(p,h,T)},p(p,T){T[0]&134656&&(O=et(p[9]),w=Wt(w,T,D,1,p,O,L,x,Jt,Ct,null,Et)),p[7]>1?E?E.p(p,T):(E=Tt(p),E.c(),E.m(h.parentNode,h)):E&&(E.d(1),E=null)},d(p){p&&(o(e),o(C),o(h));for(let T=0;T<w.length;T+=1)w[T].d();E&&E.d(p)}}}function Zt(s){let e,t="Cargando datos para la página actual...";return{c(){e=c("div"),e.textContent=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1iu9zad"&&(e.textContent=t),this.h()},h(){r(e,"class","p-8 text-center text-gray-500")},m(a,n){F(a,e,n)},p:tt,d(a){a&&o(e)}}}function $t(s){let e,t="No se encontraron avalúos que coincidan con la búsqueda.";return{c(){e=c("div"),e.textContent=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1p5azul"&&(e.textContent=t),this.h()},h(){r(e,"class","p-8 text-center text-gray-500")},m(a,n){F(a,e,n)},p:tt,d(a){a&&o(e)}}}function el(s){let e,t='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1jvpo63"&&(e.innerHTML=t),this.h()},h(){r(e,"class","p-8 flex justify-center")},m(a,n){F(a,e,n)},p:tt,d(a){a&&o(e)}}}function tl(s){let e;return{c(){e=q("Certificado")},l(t){e=H(t,"Certificado")},m(t,a){F(t,e,a)},d(t){t&&o(e)}}}function ll(s){let e,t;return{c(){e=c("div"),t=q(`
                        Generando...`),this.h()},l(a){e=i(a,"DIV",{class:!0}),d(e).forEach(o),t=H(a,`
                        Generando...`),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-green-600 rounded-full mr-2")},m(a,n){F(a,e,n),F(a,t,n)},d(a){a&&(o(e),o(t))}}}function Ct(s,e){let t,a,n,f=e[36].vehicle_appraisal_id+"",x,w,L,C=(e[36].cert||"N/A")+"",h,O,D,E=Vt(e[36].fecha)+"",p,T,P,V=e[36].cliente+"",A,ue,J,j=e[36].vehiculo+"",U,fe,te,K=e[36].placa+"",z,$,G,R=Pt(e[36].valor)+"",ee,X,le,he=e[36].color+"",ve,se,m,S,B,k,u,v,_,y,ne;function we(Z,b){return Z[10]&&Z[11]===Z[36].vehicle_appraisal_id?ll:tl}let ye=we(e),M=ye(e);function oe(){return e[20](e[36])}return{key:s,first:null,c(){t=c("tr"),a=c("td"),n=q("#"),x=q(f),w=I(),L=c("td"),h=q(C),O=I(),D=c("td"),p=q(E),T=I(),P=c("td"),A=q(V),ue=I(),J=c("td"),U=q(j),fe=I(),te=c("td"),z=q(K),$=I(),G=c("td"),ee=q(R),X=I(),le=c("td"),ve=q(he),se=I(),m=c("td"),S=c("a"),B=q("Editar"),u=I(),v=c("button"),M.c(),_=I(),this.h()},l(Z){t=i(Z,"TR",{class:!0});var b=d(t);a=i(b,"TD",{class:!0});var Ee=d(a);n=H(Ee,"#"),x=H(Ee,f),Ee.forEach(o),w=N(b),L=i(b,"TD",{class:!0});var me=d(L);h=H(me,C),me.forEach(o),O=N(b),D=i(b,"TD",{class:!0});var Be=d(D);p=H(Be,E),Be.forEach(o),T=N(b),P=i(b,"TD",{class:!0});var be=d(P);A=H(be,V),be.forEach(o),ue=N(b),J=i(b,"TD",{class:!0});var ze=d(J);U=H(ze,j),ze.forEach(o),fe=N(b),te=i(b,"TD",{class:!0});var Oe=d(te);z=H(Oe,K),Oe.forEach(o),$=N(b),G=i(b,"TD",{class:!0});var De=d(G);ee=H(De,R),De.forEach(o),X=N(b),le=i(b,"TD",{class:!0});var ie=d(le);ve=H(ie,he),ie.forEach(o),se=N(b),m=i(b,"TD",{class:!0});var ae=d(m);S=i(ae,"A",{href:!0,class:!0});var xe=d(S);B=H(xe,"Editar"),xe.forEach(o),u=N(ae),v=i(ae,"BUTTON",{class:!0});var Me=d(v);M.l(Me),Me.forEach(o),ae.forEach(o),_=N(b),b.forEach(o),this.h()},h(){r(a,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),r(L,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),r(D,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(P,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(J,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(te,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(G,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(le,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(S,"href",k=`/avaluos/${e[36].vehicle_appraisal_id}/editar`),r(S,"class","text-indigo-600 hover:text-indigo-900 mr-3"),r(v,"class","text-green-600 hover:text-green-900 bg-transparent border-none p-0 cursor-pointer text-sm font-medium inline-flex items-center"),v.disabled=e[10],r(m,"class","px-6 py-4 whitespace-nowrap text-right text-sm font-medium"),r(t,"class","hover:bg-gray-50"),this.first=t},m(Z,b){F(Z,t,b),l(t,a),l(a,n),l(a,x),l(t,w),l(t,L),l(L,h),l(t,O),l(t,D),l(D,p),l(t,T),l(t,P),l(P,A),l(t,ue),l(t,J),l(J,U),l(t,fe),l(t,te),l(te,z),l(t,$),l(t,G),l(G,ee),l(t,X),l(t,le),l(le,ve),l(t,se),l(t,m),l(m,S),l(S,B),l(m,u),l(m,v),M.m(v,null),l(t,_),y||(ne=pe(v,"click",oe),y=!0)},p(Z,b){e=Z,b[0]&512&&f!==(f=e[36].vehicle_appraisal_id+"")&&_e(x,f),b[0]&512&&C!==(C=(e[36].cert||"N/A")+"")&&_e(h,C),b[0]&512&&E!==(E=Vt(e[36].fecha)+"")&&_e(p,E),b[0]&512&&V!==(V=e[36].cliente+"")&&_e(A,V),b[0]&512&&j!==(j=e[36].vehiculo+"")&&_e(U,j),b[0]&512&&K!==(K=e[36].placa+"")&&_e(z,K),b[0]&512&&R!==(R=Pt(e[36].valor)+"")&&_e(ee,R),b[0]&512&&he!==(he=e[36].color+"")&&_e(ve,he),b[0]&512&&k!==(k=`/avaluos/${e[36].vehicle_appraisal_id}/editar`)&&r(S,"href",k),ye!==(ye=we(e))&&(M.d(1),M=ye(e),M&&(M.c(),M.m(v,null))),b[0]&1024&&(v.disabled=e[10])},d(Z){Z&&o(t),M.d(),y=!1,ne()}}}function Tt(s){let e,t,a,n,f="Registros:",x,w,L,C="10",h,O="25",D,E="50",p,T="100",P,V,A,ue,J,j,U,fe,te,K,z,$,G,R,ee,X,le=(s[5]-1)*s[6]+1+"",he,ve,se,m=Math.min(s[5]*s[6],s[2].length)+"",S,B,k,u,v,_,y,ne,we="Registros:",ye,M,oe,Z="10",b,Ee="25",me,Be="50",be,ze="100",Oe,De,ie,ae,xe,Me="Anterior",lt,Re,at,He,ge,Pe,ut="Siguiente",rt,qe,st,ft,ce=s[12]&&Dt(),de=s[12]&&At();function ht(g,Q){return g[12]?rl:al}let Fe=ht(s),Ce=Fe(s),Le=et(It(s[7])),re=[];for(let g=0;g<Le.length;g+=1)re[g]=Nt(kt(s,Le,g));function pt(g,Q){return g[12]?il:ol}let Ge=pt(s),Te=Ge(s);return{c(){e=c("div"),t=c("div"),a=c("div"),n=c("label"),n.textContent=f,x=I(),w=c("select"),L=c("option"),L.textContent=C,h=c("option"),h.textContent=O,D=c("option"),D.textContent=E,p=c("option"),p.textContent=T,P=I(),V=c("div"),A=c("button"),ce&&ce.c(),ue=q(`
                  Anterior`),j=I(),U=c("button"),de&&de.c(),fe=q(`
                  Siguiente`),K=I(),z=c("div"),$=c("div"),G=c("div"),R=c("p"),ee=q("Mostrando "),X=c("span"),he=q(le),ve=q(" a "),se=c("span"),S=q(m),B=q(" de "),k=c("span"),u=q(s[8]),v=q(" resultados"),_=I(),y=c("div"),ne=c("label"),ne.textContent=we,ye=I(),M=c("select"),oe=c("option"),oe.textContent=Z,b=c("option"),b.textContent=Ee,me=c("option"),me.textContent=Be,be=c("option"),be.textContent=ze,Oe=I(),De=c("div"),ie=c("nav"),ae=c("button"),xe=c("span"),xe.textContent=Me,lt=I(),Ce.c(),at=I();for(let g=0;g<re.length;g+=1)re[g].c();He=I(),ge=c("button"),Pe=c("span"),Pe.textContent=ut,rt=I(),Te.c(),this.h()},l(g){e=i(g,"DIV",{class:!0});var Q=d(e);t=i(Q,"DIV",{class:!0});var W=d(t);a=i(W,"DIV",{class:!0});var Ve=d(a);n=i(Ve,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(n)!=="svelte-196ea8l"&&(n.textContent=f),x=N(Ve),w=i(Ve,"SELECT",{id:!0,class:!0});var Ue=d(w);L=i(Ue,"OPTION",{"data-svelte-h":!0}),Y(L)!=="svelte-18d3dpq"&&(L.textContent=C),h=i(Ue,"OPTION",{"data-svelte-h":!0}),Y(h)!=="svelte-1ua5rw2"&&(h.textContent=O),D=i(Ue,"OPTION",{"data-svelte-h":!0}),Y(D)!=="svelte-ujtx1y"&&(D.textContent=E),p=i(Ue,"OPTION",{"data-svelte-h":!0}),Y(p)!=="svelte-ic6cau"&&(p.textContent=T),Ue.forEach(o),Ve.forEach(o),P=N(W),V=i(W,"DIV",{class:!0});var We=d(V);A=i(We,"BUTTON",{class:!0});var nt=d(A);ce&&ce.l(nt),ue=H(nt,`
                  Anterior`),nt.forEach(o),j=N(We),U=i(We,"BUTTON",{class:!0});var ot=d(U);de&&de.l(ot),fe=H(ot,`
                  Siguiente`),ot.forEach(o),We.forEach(o),W.forEach(o),K=N(Q),z=i(Q,"DIV",{class:!0});var Je=d(z);$=i(Je,"DIV",{class:!0});var Ke=d($);G=i(Ke,"DIV",{});var _t=d(G);R=i(_t,"P",{class:!0});var Ae=d(R);ee=H(Ae,"Mostrando "),X=i(Ae,"SPAN",{class:!0});var vt=d(X);he=H(vt,le),vt.forEach(o),ve=H(Ae," a "),se=i(Ae,"SPAN",{class:!0});var mt=d(se);S=H(mt,m),mt.forEach(o),B=H(Ae," de "),k=i(Ae,"SPAN",{class:!0});var bt=d(k);u=H(bt,s[8]),bt.forEach(o),v=H(Ae," resultados"),Ae.forEach(o),_t.forEach(o),_=N(Ke),y=i(Ke,"DIV",{class:!0});var Qe=d(y);ne=i(Qe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(ne)!=="svelte-1dq8ys2"&&(ne.textContent=we),ye=N(Qe),M=i(Qe,"SELECT",{id:!0,class:!0});var je=d(M);oe=i(je,"OPTION",{"data-svelte-h":!0}),Y(oe)!=="svelte-18d3dpq"&&(oe.textContent=Z),b=i(je,"OPTION",{"data-svelte-h":!0}),Y(b)!=="svelte-1ua5rw2"&&(b.textContent=Ee),me=i(je,"OPTION",{"data-svelte-h":!0}),Y(me)!=="svelte-ujtx1y"&&(me.textContent=Be),be=i(je,"OPTION",{"data-svelte-h":!0}),Y(be)!=="svelte-ic6cau"&&(be.textContent=ze),je.forEach(o),Qe.forEach(o),Ke.forEach(o),Oe=N(Je),De=i(Je,"DIV",{});var gt=d(De);ie=i(gt,"NAV",{class:!0,"aria-label":!0});var Se=d(ie);ae=i(Se,"BUTTON",{class:!0});var Ye=d(ae);xe=i(Ye,"SPAN",{class:!0,"data-svelte-h":!0}),Y(xe)!=="svelte-3d5p0z"&&(xe.textContent=Me),lt=N(Ye),Ce.l(Ye),Ye.forEach(o),at=N(Se);for(let it=0;it<re.length;it+=1)re[it].l(Se);He=N(Se),ge=i(Se,"BUTTON",{class:!0});var Xe=d(ge);Pe=i(Xe,"SPAN",{class:!0,"data-svelte-h":!0}),Y(Pe)!=="svelte-1cb4ocm"&&(Pe.textContent=ut),rt=N(Xe),Te.l(Xe),Xe.forEach(o),Se.forEach(o),gt.forEach(o),Je.forEach(o),Q.forEach(o),this.h()},h(){r(n,"for","itemsPerPageMobile"),r(n,"class","text-xs text-gray-700"),L.__value=10,ke(L,L.__value),h.__value=25,ke(h,h.__value),D.__value=50,ke(D,D.__value),p.__value=100,ke(p,p.__value),r(w,"id","itemsPerPageMobile"),r(w,"class","px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"),s[6]===void 0&&wt(()=>s[21].call(w)),r(a,"class","flex items-center space-x-2"),A.disabled=J=s[5]===1||s[12],r(A,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),U.disabled=te=s[5]===s[7]||s[12],r(U,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(V,"class","flex space-x-2"),r(t,"class","flex-1 flex justify-between sm:hidden"),r(X,"class","font-medium"),r(se,"class","font-medium"),r(k,"class","font-medium"),r(R,"class","text-sm text-gray-700"),r(ne,"for","itemsPerPage"),r(ne,"class","text-sm text-gray-700"),oe.__value=10,ke(oe,oe.__value),b.__value=25,ke(b,b.__value),me.__value=50,ke(me,me.__value),be.__value=100,ke(be,be.__value),r(M,"id","itemsPerPage"),r(M,"class","px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"),s[6]===void 0&&wt(()=>s[25].call(M)),r(y,"class","flex items-center space-x-2"),r($,"class","flex items-center space-x-4"),r(xe,"class","sr-only"),ae.disabled=Re=s[5]===1||s[12],r(ae,"class","relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(Pe,"class","sr-only"),ge.disabled=qe=s[5]===s[7]||s[12],r(ge,"class","relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(ie,"class","relative z-0 inline-flex rounded-md shadow-sm -space-x-px"),r(ie,"aria-label","Pagination"),r(z,"class","hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"),r(e,"class","px-6 py-4 flex items-center justify-between border-t border-gray-200")},m(g,Q){F(g,e,Q),l(e,t),l(t,a),l(a,n),l(a,x),l(a,w),l(w,L),l(w,h),l(w,D),l(w,p),Ze(w,s[6],!0),l(t,P),l(t,V),l(V,A),ce&&ce.m(A,null),l(A,ue),l(V,j),l(V,U),de&&de.m(U,null),l(U,fe),l(e,K),l(e,z),l(z,$),l($,G),l(G,R),l(R,ee),l(R,X),l(X,he),l(R,ve),l(R,se),l(se,S),l(R,B),l(R,k),l(k,u),l(R,v),l($,_),l($,y),l(y,ne),l(y,ye),l(y,M),l(M,oe),l(M,b),l(M,me),l(M,be),Ze(M,s[6],!0),l(z,Oe),l(z,De),l(De,ie),l(ie,ae),l(ae,xe),l(ae,lt),Ce.m(ae,null),l(ie,at);for(let W=0;W<re.length;W+=1)re[W]&&re[W].m(ie,null);l(ie,He),l(ie,ge),l(ge,Pe),l(ge,rt),Te.m(ge,null),st||(ft=[pe(w,"change",s[21]),pe(w,"change",s[22]),pe(A,"click",s[23]),pe(U,"click",s[24]),pe(M,"change",s[25]),pe(M,"change",s[26]),pe(ae,"click",s[27]),pe(ge,"click",s[29])],st=!0)},p(g,Q){if(Q[0]&64&&Ze(w,g[6]),g[12]?ce||(ce=Dt(),ce.c(),ce.m(A,ue)):ce&&(ce.d(1),ce=null),Q[0]&4128&&J!==(J=g[5]===1||g[12])&&(A.disabled=J),g[12]?de||(de=At(),de.c(),de.m(U,fe)):de&&(de.d(1),de=null),Q[0]&4256&&te!==(te=g[5]===g[7]||g[12])&&(U.disabled=te),Q[0]&96&&le!==(le=(g[5]-1)*g[6]+1+"")&&_e(he,le),Q[0]&100&&m!==(m=Math.min(g[5]*g[6],g[2].length)+"")&&_e(S,m),Q[0]&256&&_e(u,g[8]),Q[0]&64&&Ze(M,g[6]),Fe!==(Fe=ht(g))&&(Ce.d(1),Ce=Fe(g),Ce&&(Ce.c(),Ce.m(ae,null))),Q[0]&4128&&Re!==(Re=g[5]===1||g[12])&&(ae.disabled=Re),Q[0]&37024){Le=et(It(g[7]));let W;for(W=0;W<Le.length;W+=1){const Ve=kt(g,Le,W);re[W]?re[W].p(Ve,Q):(re[W]=Nt(Ve),re[W].c(),re[W].m(ie,He))}for(;W<re.length;W+=1)re[W].d(1);re.length=Le.length}Ge!==(Ge=pt(g))&&(Te.d(1),Te=Ge(g),Te&&(Te.c(),Te.m(ge,null))),Q[0]&4256&&qe!==(qe=g[5]===g[7]||g[12])&&(ge.disabled=qe)},d(g){g&&o(e),ce&&ce.d(),de&&de.d(),Ce.d(),Ft(re,g),Te.d(),st=!1,Ot(ft)}}}function Dt(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full mr-2")},m(t,a){F(t,e,a)},d(t){t&&o(e)}}}function At(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full mr-2")},m(t,a){F(t,e,a)},d(t){t&&o(e)}}}function al(s){let e,t;return{c(){e=Ie("svg"),t=Ie("path"),this.h()},l(a){e=Ne(a,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var n=d(e);t=Ne(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),d(t).forEach(o),n.forEach(o),this.h()},h(){r(t,"fill-rule","evenodd"),r(t,"d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"),r(t,"clip-rule","evenodd"),r(e,"class","h-5 w-5"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"viewBox","0 0 20 20"),r(e,"fill","currentColor"),r(e,"aria-hidden","true")},m(a,n){F(a,e,n),l(e,t)},d(a){a&&o(e)}}}function rl(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full")},m(t,a){F(t,e,a)},d(t){t&&o(e)}}}function sl(s){let e,t=`...
                      `;return{c(){e=c("span"),e.textContent=t,this.h()},l(a){e=i(a,"SPAN",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-mgxcbc"&&(e.textContent=t),this.h()},h(){r(e,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700")},m(a,n){F(a,e,n)},p:tt,d(a){a&&o(e)}}}function nl(s){let e,t=s[33]+"",a,n,f,x,w;function L(){return s[28](s[33])}return{c(){e=c("button"),a=q(t),n=I(),this.h()},l(C){e=i(C,"BUTTON",{class:!0});var h=d(e);a=H(h,t),n=N(h),h.forEach(o),this.h()},h(){e.disabled=s[12],r(e,"class",f="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium "+(s[5]===s[33]?"text-blue-600 bg-blue-50":"text-gray-700 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(C,h){F(C,e,h),l(e,a),l(e,n),x||(w=pe(e,"click",L),x=!0)},p(C,h){s=C,h[0]&128&&t!==(t=s[33]+"")&&_e(a,t),h[0]&4096&&(e.disabled=s[12]),h[0]&160&&f!==(f="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium "+(s[5]===s[33]?"text-blue-600 bg-blue-50":"text-gray-700 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&r(e,"class",f)},d(C){C&&o(e),x=!1,w()}}}function Nt(s){let e;function t(f,x){if(f[33]===f[5]||f[33]===1||f[33]===f[7]||f[33]>=f[5]-1&&f[33]<=f[5]+1)return nl;if(f[33]===f[5]-2||f[33]===f[5]+2)return sl}let a=t(s),n=a&&a(s);return{c(){n&&n.c(),e=$e()},l(f){n&&n.l(f),e=$e()},m(f,x){n&&n.m(f,x),F(f,e,x)},p(f,x){a===(a=t(f))&&n?n.p(f,x):(n&&n.d(1),n=a&&a(f),n&&(n.c(),n.m(e.parentNode,e)))},d(f){f&&o(e),n&&n.d(f)}}}function ol(s){let e,t;return{c(){e=Ie("svg"),t=Ie("path"),this.h()},l(a){e=Ne(a,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var n=d(e);t=Ne(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),d(t).forEach(o),n.forEach(o),this.h()},h(){r(t,"fill-rule","evenodd"),r(t,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),r(t,"clip-rule","evenodd"),r(e,"class","h-5 w-5"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"viewBox","0 0 20 20"),r(e,"fill","currentColor"),r(e,"aria-hidden","true")},m(a,n){F(a,e,n),l(e,t)},d(a){a&&o(e)}}}function il(s){let e;return{c(){e=c("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-gray-600 rounded-full")},m(t,a){F(t,e,a)},d(t){t&&o(e)}}}function cl(s){let e,t,a,n,f,x,w="Gestión de Avalúos",L,C,h,O,D,E,p=s[3]?"Actualizando...":"Actualizar",T,P,V,A=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
          Nuevo Avalúo`,ue,J,j,U,fe="Buscar Avalúos",te,K,z,$,G,R,ee,X,le,he;t=new Gt({props:{user:s[0]}});function ve(u,v){return u[4]?Yt:Qt}let se=ve(s),m=se(s);function S(u,v){return u[3]?el:u[2].length===0?$t:u[9].length===0&&u[2].length>0?Zt:Xt}let B=S(s),k=B(s);return{c(){e=c("div"),Ht(t.$$.fragment),a=I(),n=c("main"),f=c("div"),x=c("h1"),x.textContent=w,L=I(),C=c("div"),h=c("button"),O=Ie("svg"),D=Ie("path"),E=I(),T=q(p),P=I(),V=c("button"),V.innerHTML=A,ue=I(),J=c("div"),j=c("div"),U=c("label"),U.textContent=fe,te=I(),K=c("div"),z=c("input"),$=I(),G=c("div"),m.c(),R=I(),ee=c("div"),k.c(),this.h()},l(u){e=i(u,"DIV",{class:!0});var v=d(e);Rt(t.$$.fragment,v),a=N(v),n=i(v,"MAIN",{class:!0});var _=d(n);f=i(_,"DIV",{class:!0});var y=d(f);x=i(y,"H1",{class:!0,"data-svelte-h":!0}),Y(x)!=="svelte-1psqzro"&&(x.textContent=w),L=N(y),C=i(y,"DIV",{class:!0});var ne=d(C);h=i(ne,"BUTTON",{class:!0});var we=d(h);O=Ne(we,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var ye=d(O);D=Ne(ye,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),d(D).forEach(o),ye.forEach(o),E=N(we),T=H(we,p),we.forEach(o),P=N(ne),V=i(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(V)!=="svelte-fqaqf8"&&(V.innerHTML=A),ne.forEach(o),y.forEach(o),ue=N(_),J=i(_,"DIV",{class:!0});var M=d(J);j=i(M,"DIV",{class:!0});var oe=d(j);U=i(oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(U)!=="svelte-1rufmzp"&&(U.textContent=fe),te=N(oe),K=i(oe,"DIV",{class:!0});var Z=d(K);z=i(Z,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),$=N(Z),G=i(Z,"DIV",{class:!0});var b=d(G);m.l(b),b.forEach(o),Z.forEach(o),oe.forEach(o),M.forEach(o),R=N(_),ee=i(_,"DIV",{class:!0});var Ee=d(ee);k.l(Ee),Ee.forEach(o),_.forEach(o),v.forEach(o),this.h()},h(){r(x,"class","text-2xl font-bold text-gray-800"),r(D,"fill-rule","evenodd"),r(D,"d","M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"),r(D,"clip-rule","evenodd"),r(O,"xmlns","http://www.w3.org/2000/svg"),r(O,"class","h-5 w-5 mr-2"),r(O,"viewBox","0 0 20 20"),r(O,"fill","currentColor"),h.disabled=s[3],r(h,"class","bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"),r(V,"class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"),r(C,"class","flex gap-2"),r(f,"class","flex justify-between items-center mb-6"),r(U,"for","search"),r(U,"class","block text-sm font-medium text-gray-700 mb-1"),r(z,"id","search"),r(z,"type","text"),r(z,"placeholder","Buscar por placa, cliente, vehículo, VIN, certificado..."),r(z,"class","w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10"),r(G,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),r(K,"class","relative"),r(j,"class","flex-1"),r(J,"class","bg-white rounded-lg shadow p-4 mb-6"),r(ee,"class","bg-white rounded-lg shadow overflow-hidden max-w-full"),r(n,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"),r(e,"class","min-h-screen bg-gray-50")},m(u,v){F(u,e,v),jt(t,e,null),l(e,a),l(e,n),l(n,f),l(f,x),l(f,L),l(f,C),l(C,h),l(h,O),l(O,D),l(h,E),l(h,T),l(C,P),l(C,V),l(n,ue),l(n,J),l(J,j),l(j,U),l(j,te),l(j,K),l(K,z),ke(z,s[1]),l(K,$),l(K,G),m.m(G,null),l(n,R),l(n,ee),k.m(ee,null),X=!0,le||(he=[pe(h,"click",s[18]),pe(V,"click",s[16]),pe(z,"input",s[19]),pe(z,"input",s[14])],le=!0)},p(u,v){const _={};v[0]&1&&(_.user=u[0]),t.$set(_),(!X||v[0]&8)&&p!==(p=u[3]?"Actualizando...":"Actualizar")&&_e(T,p),(!X||v[0]&8)&&(h.disabled=u[3]),v[0]&2&&z.value!==u[1]&&ke(z,u[1]),se!==(se=ve(u))&&(m.d(1),m=se(u),m&&(m.c(),m.m(G,null))),B===(B=S(u))&&k?k.p(u,v):(k.d(1),k=B(u),k&&(k.c(),k.m(ee,null)))},i(u){X||(Ut(t.$$.fragment,u),X=!0)},o(u){Mt(t.$$.fragment,u),X=!1},d(u){u&&o(e),zt(t),m.d(),k.d(),le=!1,Ot(he)}}}function It(s){return Array.from({length:s},(e,t)=>t+1)}function Pt(s){return new Intl.NumberFormat("es-CR",{style:"currency",currency:"CRC"}).format(s)}function Vt(s){if(!s)return"";const e=new Date(s);return isNaN(e.getTime())?"":new Intl.DateTimeFormat("es-CR",{year:"numeric",month:"short",day:"numeric"}).format(e)}function dl(s,e,t){let a=null,n="",f=[],x=[],w=!0,L=null,C=!1,h=1,O=10,D=0,E=0,p=[],T=!1,P=null,V=!1;async function A(m=1,S=""){try{t(3,w=!0);let B,k;S&&S.trim()?(k=new URLSearchParams({query:S.trim(),page:m.toString(),limit:O.toString()}),B=`https://api-backend-trochez.onrender.com/api/appraisals/search?${k}`):(k=new URLSearchParams({page:m.toString(),limit:O.toString()}),B=`${xt.AVALUOS.getAll}?${k}`);const u=await Kt(B);let v;u.data&&u.pagination?(v=u.data,t(8,E=u.pagination.total_count),t(7,D=u.pagination.total_pages)):u.avaluos&&u.total!==void 0?(v=u.avaluos,t(8,E=u.total),t(7,D=u.totalPages||Math.ceil(E/O))):(v=u,t(8,E=v.length),t(7,D=1)),f=v.map(_=>({id:_.id,vehicle_appraisal_id:_.vehicle_appraisal_id||_.id,fecha:_.appraisal_date||"",cliente:_.applicant||"",vehiculo:`${_.brand||""} ${_.vehicle_description||""} ${_.model_year||""}`.trim(),placa:_.plate_number||"",valor:_.appraisal_value_trochez,color:_.color||"",kilometraje:_.mileage||"",combustible:_.fuel_type||"",motor:_.engine_size||"",propietario:_.owner||"",valorUSD:_.appraisal_value_usd,vin:_.vin||"",numeroMotor:_.engine_number||"",notas:_.notes||"",validezDias:_.validity_days,validezKms:_.validity_kms,extras:_.extras||"",deduccion:_.deductions||"",cert:_.cert||""})),t(2,x=[...f]),t(5,h=m),J(),S&&t(2,x=[...f])}catch(B){let k="Error al cargar los avalúos.";B.status===401?(k="Error de autenticación. Por favor, inicie sesión nuevamente.",setTimeout(()=>dt("/login"),2e3)):B.message&&(k+=" "+B.message),alert(k)}finally{t(3,w=!1)}}qt(async()=>{const m=localStorage.getItem("userData");if(m)try{t(0,a=JSON.parse(m))}catch{}await A(1,"");const S=()=>{document.hidden||A(1,n)};return document.addEventListener("visibilitychange",S),()=>{document.removeEventListener("visibilitychange",S)}});function ue(){L&&clearTimeout(L),t(4,C=!0),L=setTimeout(async()=>{t(5,h=1),await A(h,n),t(4,C=!1)},500)}function J(){t(9,p=[...x])}async function j(m){if(m>=1&&m<=D&&!V){t(12,V=!0),t(5,h=m);try{await A(m,n)}finally{t(12,V=!1)}}}function U(){dt("/avaluos/nuevo")}async function fe(m){try{const S=localStorage.getItem("jwtToken");if(!S){alert("No se encontró token de autenticación. Por favor inicie sesión nuevamente."),setTimeout(()=>dt("/login"),1e3);return}t(10,T=!0),t(11,P=m);const B=await fetch(xt.CERTIFICADOS.get(m),{method:"GET",headers:{Authorization:`Bearer ${S}`}});if(!B.ok)throw new Error(`Error al obtener el certificado: ${B.status} ${B.statusText}`);const k=B.headers.get("content-type");if(k&&k.includes("application/pdf")){const u=await B.blob(),v=window.URL.createObjectURL(u);try{const _=window.open(v,"_blank");if(!_||_.closed||typeof _.closed>"u"){const y=document.createElement("a");y.href=v,y.target="_blank",y.download=`certificado_${m}.pdf`,document.body.appendChild(y),y.click(),document.body.removeChild(y),setTimeout(()=>{alert("El certificado se está descargando. Si no se abrió automáticamente, revisa tu carpeta de descargas.")},100)}}catch{const y=document.createElement("a");y.href=v,y.download=`certificado_${m}.pdf`,document.body.appendChild(y),y.click(),document.body.removeChild(y),alert("El certificado se está descargando. Revisa tu carpeta de descargas.")}}else if(k&&k.includes("application/json")){const u=await B.json();if(u.url)try{const v=window.open(u.url,"_blank");(!v||v.closed||typeof v.closed>"u")&&(window.location.href=u.url)}catch{window.location.href=u.url}else throw new Error(u.message||"Error al generar el certificado")}else{const u=await B.blob(),v=window.URL.createObjectURL(u);try{const _=window.open(v,"_blank");if(!_||_.closed||typeof _.closed>"u"){const y=document.createElement("a");y.href=v,y.target="_blank",y.download=`certificado_${m}.pdf`,document.body.appendChild(y),y.click(),document.body.removeChild(y)}}catch{const y=document.createElement("a");y.href=v,y.download=`certificado_${m}.pdf`,document.body.appendChild(y),y.click(),document.body.removeChild(y)}}}catch(S){alert(`Error al obtener el certificado: ${S.message}`)}finally{t(10,T=!1),t(11,P=null)}}const te=()=>A(1,n);function K(){n=this.value,t(1,n)}const z=m=>fe(m.vehicle_appraisal_id);function $(){O=yt(this),t(6,O)}const G=()=>A(1,n),R=()=>j(h-1),ee=()=>j(h+1);function X(){O=yt(this),t(6,O)}return[a,n,x,w,C,h,O,D,E,p,T,P,V,A,ue,j,U,fe,te,K,z,$,G,R,ee,X,()=>A(1,n),()=>j(h-1),m=>j(m),()=>j(h+1)]}class vl extends Lt{constructor(e){super(),St(this,e,dl,cl,Bt,{},null,[-1,-1])}}export{vl as component};
