import{S as Ge,i as Je,s as Ke,d as o,m as Qe,r as Fe,o as Ye,p as We,a as ie,q as Be,b as re,u as Xe,c as l,v as he,w as r,e as f,f as v,x as Ze,h as N,y as ue,z as be,g as S,j as h,A as $e,k as I,B as we,t as U,C as et,n as Ie,D as De,E as tt}from"../chunks/CUogZUru.js";import{N as lt,e as Ne,u as at,d as rt}from"../chunks/Cm5bl9T-.js";import"../chunks/IHki7fMi.js";import{g as Ve}from"../chunks/Czek2359.js";import{a as st,A as Pe}from"../chunks/bK7qKMo_.js";function Se(n,e,t){const a=n.slice();return a[24]=e[t],a[26]=t,a}function Ue(n,e,t){const a=n.slice();return a[27]=e[t],a}function nt(n){let e,t,a,c='<tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No. Certificado</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vehículo</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Placa</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th> <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Color</th> <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th></tr>',d,g,x=[],D=new Map,k,w,T=Ne(n[6]);const L=_=>_[27].vehicle_appraisal_id;for(let _=0;_<T.length;_+=1){let y=Ue(n,T,_),C=L(y);D.set(C,x[_]=je(C,y))}let m=n[5]>1&&He(n);return{c(){e=h("div"),t=h("table"),a=h("thead"),a.innerHTML=c,d=I(),g=h("tbody");for(let _=0;_<x.length;_+=1)x[_].c();k=I(),m&&m.c(),w=De(),this.h()},l(_){e=f(_,"DIV",{class:!0});var y=v(e);t=f(y,"TABLE",{class:!0});var C=v(t);a=f(C,"THEAD",{class:!0,"data-svelte-h":!0}),ue(a)!=="svelte-mi2392"&&(a.innerHTML=c),d=N(C),g=f(C,"TBODY",{class:!0});var A=v(g);for(let Y=0;Y<x.length;Y+=1)x[Y].l(A);A.forEach(o),C.forEach(o),y.forEach(o),k=N(_),m&&m.l(_),w=De(),this.h()},h(){r(a,"class","bg-gray-50"),r(g,"class","bg-white divide-y divide-gray-200"),r(t,"class","min-w-full divide-y divide-gray-200"),r(e,"class","overflow-x-auto")},m(_,y){re(_,e,y),l(e,t),l(t,a),l(t,d),l(t,g);for(let C=0;C<x.length;C+=1)x[C]&&x[C].m(g,null);re(_,k,y),m&&m.m(_,y),re(_,w,y)},p(_,y){y&8640&&(T=Ne(_[6]),x=at(x,y,L,1,_,T,D,g,rt,je,null,Ue)),_[5]>1?m?m.p(_,y):(m=He(_),m.c(),m.m(w.parentNode,w)):m&&(m.d(1),m=null)},d(_){_&&(o(e),o(k),o(w));for(let y=0;y<x.length;y+=1)x[y].d();m&&m.d(_)}}}function ot(n){let e,t="Cargando datos para la página actual...";return{c(){e=h("div"),e.textContent=t,this.h()},l(a){e=f(a,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1iu9zad"&&(e.textContent=t),this.h()},h(){r(e,"class","p-8 text-center text-gray-500")},m(a,c){re(a,e,c)},p:Ie,d(a){a&&o(e)}}}function it(n){let e,t="No se encontraron avalúos que coincidan con la búsqueda.";return{c(){e=h("div"),e.textContent=t,this.h()},l(a){e=f(a,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1p5azul"&&(e.textContent=t),this.h()},h(){r(e,"class","p-8 text-center text-gray-500")},m(a,c){re(a,e,c)},p:Ie,d(a){a&&o(e)}}}function ct(n){let e,t='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(a){e=f(a,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1jvpo63"&&(e.innerHTML=t),this.h()},h(){r(e,"class","p-8 flex justify-center")},m(a,c){re(a,e,c)},p:Ie,d(a){a&&o(e)}}}function dt(n){let e;return{c(){e=U("Certificado")},l(t){e=S(t,"Certificado")},m(t,a){re(t,e,a)},d(t){t&&o(e)}}}function ut(n){let e,t;return{c(){e=h("div"),t=U(`
                        Generando...`),this.h()},l(a){e=f(a,"DIV",{class:!0}),v(e).forEach(o),t=S(a,`
                        Generando...`),this.h()},h(){r(e,"class","animate-spin h-4 w-4 border-b-2 border-green-600 rounded-full mr-2")},m(a,c){re(a,e,c),re(a,t,c)},d(a){a&&(o(e),o(t))}}}function je(n,e){let t,a,c,d=e[27].vehicle_appraisal_id+"",g,x,D,k=(e[27].cert||"N/A")+"",w,T,L,m=Re(e[27].fecha)+"",_,y,C,A=e[27].cliente+"",Y,W,j,J=e[27].vehiculo+"",K,O,Z,te=e[27].placa+"",Q,u,p,i=qe(e[27].valor)+"",z,B,H,$=e[27].color+"",F,se,ee,X,q,b,V,P,oe,G,le;function fe(E,s){return E[7]&&E[8]===E[27].vehicle_appraisal_id?ut:dt}let ce=fe(e),ae=ce(e);function ne(){return e[15](e[27])}return{key:n,first:null,c(){t=h("tr"),a=h("td"),c=U("#"),g=U(d),x=I(),D=h("td"),w=U(k),T=I(),L=h("td"),_=U(m),y=I(),C=h("td"),Y=U(A),W=I(),j=h("td"),K=U(J),O=I(),Z=h("td"),Q=U(te),u=I(),p=h("td"),z=U(i),B=I(),H=h("td"),F=U($),se=I(),ee=h("td"),X=h("a"),q=U("Editar"),V=I(),P=h("button"),ae.c(),oe=I(),this.h()},l(E){t=f(E,"TR",{class:!0});var s=v(t);a=f(s,"TD",{class:!0});var R=v(a);c=S(R,"#"),g=S(R,d),R.forEach(o),x=N(s),D=f(s,"TD",{class:!0});var M=v(D);w=S(M,k),M.forEach(o),T=N(s),L=f(s,"TD",{class:!0});var pe=v(L);_=S(pe,m),pe.forEach(o),y=N(s),C=f(s,"TD",{class:!0});var ye=v(C);Y=S(ye,A),ye.forEach(o),W=N(s),j=f(s,"TD",{class:!0});var ve=v(j);K=S(ve,J),ve.forEach(o),O=N(s),Z=f(s,"TD",{class:!0});var xe=v(Z);Q=S(xe,te),xe.forEach(o),u=N(s),p=f(s,"TD",{class:!0});var de=v(p);z=S(de,i),de.forEach(o),B=N(s),H=f(s,"TD",{class:!0});var ke=v(H);F=S(ke,$),ke.forEach(o),se=N(s),ee=f(s,"TD",{class:!0});var _e=v(ee);X=f(_e,"A",{href:!0,class:!0});var Ee=v(X);q=S(Ee,"Editar"),Ee.forEach(o),V=N(_e),P=f(_e,"BUTTON",{class:!0});var Ce=v(P);ae.l(Ce),Ce.forEach(o),_e.forEach(o),oe=N(s),s.forEach(o),this.h()},h(){r(a,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),r(D,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),r(L,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(C,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(j,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(Z,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(p,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(H,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(X,"href",b=`/avaluos/${e[27].vehicle_appraisal_id}/editar`),r(X,"class","text-indigo-600 hover:text-indigo-900 mr-3"),r(P,"class","text-green-600 hover:text-green-900 bg-transparent border-none p-0 cursor-pointer text-sm font-medium inline-flex items-center"),P.disabled=e[7],r(ee,"class","px-6 py-4 whitespace-nowrap text-right text-sm font-medium"),r(t,"class","hover:bg-gray-50"),this.first=t},m(E,s){re(E,t,s),l(t,a),l(a,c),l(a,g),l(t,x),l(t,D),l(D,w),l(t,T),l(t,L),l(L,_),l(t,y),l(t,C),l(C,Y),l(t,W),l(t,j),l(j,K),l(t,O),l(t,Z),l(Z,Q),l(t,u),l(t,p),l(p,z),l(t,B),l(t,H),l(H,F),l(t,se),l(t,ee),l(ee,X),l(X,q),l(ee,V),l(ee,P),ae.m(P,null),l(t,oe),G||(le=he(P,"click",ne),G=!0)},p(E,s){e=E,s&64&&d!==(d=e[27].vehicle_appraisal_id+"")&&ie(g,d),s&64&&k!==(k=(e[27].cert||"N/A")+"")&&ie(w,k),s&64&&m!==(m=Re(e[27].fecha)+"")&&ie(_,m),s&64&&A!==(A=e[27].cliente+"")&&ie(Y,A),s&64&&J!==(J=e[27].vehiculo+"")&&ie(K,J),s&64&&te!==(te=e[27].placa+"")&&ie(Q,te),s&64&&i!==(i=qe(e[27].valor)+"")&&ie(z,i),s&64&&$!==($=e[27].color+"")&&ie(F,$),s&64&&b!==(b=`/avaluos/${e[27].vehicle_appraisal_id}/editar`)&&r(X,"href",b),ce!==(ce=fe(e))&&(ae.d(1),ae=ce(e),ae&&(ae.c(),ae.m(P,null))),s&128&&(P.disabled=e[7])},d(E){E&&o(t),ae.d(),G=!1,le()}}}function He(n){let e,t,a,c,d,g,x,D,k,w,T,L,m,_,y,C=(n[4]-1)*me+1+"",A,Y,W,j=Math.min(n[4]*me,n[2].length)+"",J,K,O,Z=n[2].length+"",te,Q,u,p,i,z,B,H="Anterior",$,F,se,ee,X,q,b,V,P="Siguiente",oe,G,le,fe,ce,ae,ne=Ne(Array(n[5])),E=[];for(let s=0;s<ne.length;s+=1)E[s]=Oe(Se(n,ne,s));return{c(){e=h("div"),t=h("div"),a=h("button"),c=U("Anterior"),g=I(),x=h("button"),D=U("Siguiente"),w=I(),T=h("div"),L=h("div"),m=h("p"),_=U("Mostrando "),y=h("span"),A=U(C),Y=U(" a "),W=h("span"),J=U(j),K=U(" de "),O=h("span"),te=U(Z),Q=U(" resultados"),u=I(),p=h("div"),i=h("nav"),z=h("button"),B=h("span"),B.textContent=H,$=I(),F=we("svg"),se=we("path"),X=I();for(let s=0;s<E.length;s+=1)E[s].c();q=I(),b=h("button"),V=h("span"),V.textContent=P,oe=I(),G=we("svg"),le=we("path"),this.h()},l(s){e=f(s,"DIV",{class:!0});var R=v(e);t=f(R,"DIV",{class:!0});var M=v(t);a=f(M,"BUTTON",{class:!0});var pe=v(a);c=S(pe,"Anterior"),pe.forEach(o),g=N(M),x=f(M,"BUTTON",{class:!0});var ye=v(x);D=S(ye,"Siguiente"),ye.forEach(o),M.forEach(o),w=N(R),T=f(R,"DIV",{class:!0});var ve=v(T);L=f(ve,"DIV",{});var xe=v(L);m=f(xe,"P",{class:!0});var de=v(m);_=S(de,"Mostrando "),y=f(de,"SPAN",{class:!0});var ke=v(y);A=S(ke,C),ke.forEach(o),Y=S(de," a "),W=f(de,"SPAN",{class:!0});var _e=v(W);J=S(_e,j),_e.forEach(o),K=S(de," de "),O=f(de,"SPAN",{class:!0});var Ee=v(O);te=S(Ee,Z),Ee.forEach(o),Q=S(de," resultados"),de.forEach(o),xe.forEach(o),u=N(ve),p=f(ve,"DIV",{});var Ce=v(p);i=f(Ce,"NAV",{class:!0,"aria-label":!0});var ge=v(i);z=f(ge,"BUTTON",{class:!0});var Te=v(z);B=f(Te,"SPAN",{class:!0,"data-svelte-h":!0}),ue(B)!=="svelte-3d5p0z"&&(B.textContent=H),$=N(Te),F=be(Te,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var Me=v(F);se=be(Me,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(se).forEach(o),Me.forEach(o),Te.forEach(o),X=N(ge);for(let Le=0;Le<E.length;Le+=1)E[Le].l(ge);q=N(ge),b=f(ge,"BUTTON",{class:!0});var Ae=v(b);V=f(Ae,"SPAN",{class:!0,"data-svelte-h":!0}),ue(V)!=="svelte-1cb4ocm"&&(V.textContent=P),oe=N(Ae),G=be(Ae,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var ze=v(G);le=be(ze,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(le).forEach(o),ze.forEach(o),Ae.forEach(o),ge.forEach(o),Ce.forEach(o),ve.forEach(o),R.forEach(o),this.h()},h(){a.disabled=d=n[4]===1,r(a,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),x.disabled=k=n[4]===n[5],r(x,"class","ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(t,"class","flex-1 flex justify-between sm:hidden"),r(y,"class","font-medium"),r(W,"class","font-medium"),r(O,"class","font-medium"),r(m,"class","text-sm text-gray-700"),r(B,"class","sr-only"),r(se,"fill-rule","evenodd"),r(se,"d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"),r(se,"clip-rule","evenodd"),r(F,"class","h-5 w-5"),r(F,"xmlns","http://www.w3.org/2000/svg"),r(F,"viewBox","0 0 20 20"),r(F,"fill","currentColor"),r(F,"aria-hidden","true"),z.disabled=ee=n[4]===1,r(z,"class","relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(V,"class","sr-only"),r(le,"fill-rule","evenodd"),r(le,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),r(le,"clip-rule","evenodd"),r(G,"class","h-5 w-5"),r(G,"xmlns","http://www.w3.org/2000/svg"),r(G,"viewBox","0 0 20 20"),r(G,"fill","currentColor"),r(G,"aria-hidden","true"),b.disabled=fe=n[4]===n[5],r(b,"class","relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),r(i,"class","relative z-0 inline-flex rounded-md shadow-sm -space-x-px"),r(i,"aria-label","Pagination"),r(T,"class","hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"),r(e,"class","px-6 py-4 flex items-center justify-between border-t border-gray-200")},m(s,R){re(s,e,R),l(e,t),l(t,a),l(a,c),l(t,g),l(t,x),l(x,D),l(e,w),l(e,T),l(T,L),l(L,m),l(m,_),l(m,y),l(y,A),l(m,Y),l(m,W),l(W,J),l(m,K),l(m,O),l(O,te),l(m,Q),l(T,u),l(T,p),l(p,i),l(i,z),l(z,B),l(z,$),l(z,F),l(F,se),l(i,X);for(let M=0;M<E.length;M+=1)E[M]&&E[M].m(i,null);l(i,q),l(i,b),l(b,V),l(b,oe),l(b,G),l(G,le),ce||(ae=[he(a,"click",n[16]),he(x,"click",n[17]),he(z,"click",n[18]),he(b,"click",n[20])],ce=!0)},p(s,R){if(R&16&&d!==(d=s[4]===1)&&(a.disabled=d),R&48&&k!==(k=s[4]===s[5])&&(x.disabled=k),R&16&&C!==(C=(s[4]-1)*me+1+"")&&ie(A,C),R&20&&j!==(j=Math.min(s[4]*me,s[2].length)+"")&&ie(J,j),R&4&&Z!==(Z=s[2].length+"")&&ie(te,Z),R&16&&ee!==(ee=s[4]===1)&&(z.disabled=ee),R&2096){ne=Ne(Array(s[5]));let M;for(M=0;M<ne.length;M+=1){const pe=Se(s,ne,M);E[M]?E[M].p(pe,R):(E[M]=Oe(pe),E[M].c(),E[M].m(i,q))}for(;M<E.length;M+=1)E[M].d(1);E.length=ne.length}R&48&&fe!==(fe=s[4]===s[5])&&(b.disabled=fe)},d(s){s&&o(e),tt(E,s),ce=!1,Fe(ae)}}}function ft(n){let e,t=`...
                      `;return{c(){e=h("span"),e.textContent=t,this.h()},l(a){e=f(a,"SPAN",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-mgxcbc"&&(e.textContent=t),this.h()},h(){r(e,"class","relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700")},m(a,c){re(a,e,c)},p:Ie,d(a){a&&o(e)}}}function ht(n){let e,t=n[26]+1+"",a,c,d,g,x;function D(){return n[19](n[26])}return{c(){e=h("button"),a=U(t),c=I(),this.h()},l(k){e=f(k,"BUTTON",{class:!0});var w=v(e);a=S(w,t),c=N(w),w.forEach(o),this.h()},h(){r(e,"class",d="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium "+(n[4]===n[26]+1?"text-blue-600 bg-blue-50":"text-gray-700 hover:bg-gray-50"))},m(k,w){re(k,e,w),l(e,a),l(e,c),g||(x=he(e,"click",D),g=!0)},p(k,w){n=k,w&16&&d!==(d="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium "+(n[4]===n[26]+1?"text-blue-600 bg-blue-50":"text-gray-700 hover:bg-gray-50"))&&r(e,"class",d)},d(k){k&&o(e),g=!1,x()}}}function Oe(n){let e;function t(d,g){if(d[26]+1===d[4]||d[26]+1===1||d[26]+1===d[5]||d[26]+1>=d[4]-1&&d[26]+1<=d[4]+1)return ht;if(d[26]+1===d[4]-2||d[26]+1===d[4]+2)return ft}let a=t(n),c=a&&a(n);return{c(){c&&c.c(),e=De()},l(d){c&&c.l(d),e=De()},m(d,g){c&&c.m(d,g),re(d,e,g)},p(d,g){a===(a=t(d))&&c?c.p(d,g):(c&&c.d(1),c=a&&a(d),c&&(c.c(),c.m(e.parentNode,e)))},d(d){d&&o(e),c&&c.d(d)}}}function pt(n){let e,t,a,c,d,g,x="Gestión de Avalúos",D,k,w,T,L,m,_=n[3]?"Actualizando...":"Actualizar",y,C,A,Y=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
          Nuevo Avalúo`,W,j,J,K,O,Z="Buscar Avalúos",te,Q,u,p,i,z='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg>',B,H,$,F,se;t=new lt({props:{user:n[0]}});function ee(b,V){return b[3]?ct:b[2].length===0?it:b[6].length===0&&b[2].length>0?ot:nt}let X=ee(n),q=X(n);return{c(){e=h("div"),$e(t.$$.fragment),a=I(),c=h("main"),d=h("div"),g=h("h1"),g.textContent=x,D=I(),k=h("div"),w=h("button"),T=we("svg"),L=we("path"),m=I(),y=U(_),C=I(),A=h("button"),A.innerHTML=Y,W=I(),j=h("div"),J=h("div"),K=h("div"),O=h("label"),O.textContent=Z,te=I(),Q=h("div"),u=h("input"),p=I(),i=h("div"),i.innerHTML=z,B=I(),H=h("div"),q.c(),this.h()},l(b){e=f(b,"DIV",{class:!0});var V=v(e);Ze(t.$$.fragment,V),a=N(V),c=f(V,"MAIN",{class:!0});var P=v(c);d=f(P,"DIV",{class:!0});var oe=v(d);g=f(oe,"H1",{class:!0,"data-svelte-h":!0}),ue(g)!=="svelte-1psqzro"&&(g.textContent=x),D=N(oe),k=f(oe,"DIV",{class:!0});var G=v(k);w=f(G,"BUTTON",{class:!0});var le=v(w);T=be(le,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var fe=v(T);L=be(fe,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(L).forEach(o),fe.forEach(o),m=N(le),y=S(le,_),le.forEach(o),C=N(G),A=f(G,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(A)!=="svelte-fqaqf8"&&(A.innerHTML=Y),G.forEach(o),oe.forEach(o),W=N(P),j=f(P,"DIV",{class:!0});var ce=v(j);J=f(ce,"DIV",{class:!0});var ae=v(J);K=f(ae,"DIV",{class:!0});var ne=v(K);O=f(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(O)!=="svelte-1rufmzp"&&(O.textContent=Z),te=N(ne),Q=f(ne,"DIV",{class:!0});var E=v(Q);u=f(E,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),p=N(E),i=f(E,"DIV",{class:!0,"data-svelte-h":!0}),ue(i)!=="svelte-198uqly"&&(i.innerHTML=z),E.forEach(o),ne.forEach(o),ae.forEach(o),ce.forEach(o),B=N(P),H=f(P,"DIV",{class:!0});var s=v(H);q.l(s),s.forEach(o),P.forEach(o),V.forEach(o),this.h()},h(){r(g,"class","text-2xl font-bold text-gray-800"),r(L,"fill-rule","evenodd"),r(L,"d","M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"),r(L,"clip-rule","evenodd"),r(T,"xmlns","http://www.w3.org/2000/svg"),r(T,"class","h-5 w-5 mr-2"),r(T,"viewBox","0 0 20 20"),r(T,"fill","currentColor"),w.disabled=n[3],r(w,"class","bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"),r(A,"class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center"),r(k,"class","flex gap-2"),r(d,"class","flex justify-between items-center mb-6"),r(O,"for","search"),r(O,"class","block text-sm font-medium text-gray-700 mb-1"),r(u,"id","search"),r(u,"type","text"),r(u,"placeholder","Buscar por cliente, vehículo, placa, color, VIN, número de certificado o cert..."),r(u,"class","w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10"),r(i,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),r(Q,"class","relative"),r(K,"class","flex-1"),r(J,"class","flex flex-col md:flex-row gap-4"),r(j,"class","bg-white rounded-lg shadow p-4 mb-6"),r(H,"class","bg-white rounded-lg shadow overflow-hidden"),r(c,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"),r(e,"class","min-h-screen bg-gray-50")},m(b,V){re(b,e,V),Xe(t,e,null),l(e,a),l(e,c),l(c,d),l(d,g),l(d,D),l(d,k),l(k,w),l(w,T),l(T,L),l(w,m),l(w,y),l(k,C),l(k,A),l(c,W),l(c,j),l(j,J),l(J,K),l(K,O),l(K,te),l(K,Q),l(Q,u),Be(u,n[1]),l(Q,p),l(Q,i),l(c,B),l(c,H),q.m(H,null),$=!0,F||(se=[he(w,"click",n[9]),he(A,"click",n[12]),he(u,"input",n[14]),he(u,"input",n[10])],F=!0)},p(b,[V]){const P={};V&1&&(P.user=b[0]),t.$set(P),(!$||V&8)&&_!==(_=b[3]?"Actualizando...":"Actualizar")&&ie(y,_),(!$||V&8)&&(w.disabled=b[3]),V&2&&u.value!==b[1]&&Be(u,b[1]),X===(X=ee(b))&&q?q.p(b,V):(q.d(1),q=X(b),q&&(q.c(),q.m(H,null)))},i(b){$||(We(t.$$.fragment,b),$=!0)},o(b){Ye(t.$$.fragment,b),$=!1},d(b){b&&o(e),Qe(t),q.d(),F=!1,Fe(se)}}}let me=10;function qe(n){return new Intl.NumberFormat("es-CR",{style:"currency",currency:"CRC"}).format(n)}function Re(n){if(!n)return"";const e=new Date(n);return isNaN(e.getTime())?"":new Intl.DateTimeFormat("es-CR",{year:"numeric",month:"short",day:"numeric"}).format(e)}function vt(n,e,t){let a=null,c="",d=[],g=[],x=!0,D=1,k=0,w=[],T=!1,L=null;async function m(){try{t(3,x=!0);const u=localStorage.getItem("jwtToken");console.log("Token en avaluos page:",u?"Existe":"No existe"),u&&console.log("Token value:",u.substring(0,20)+"..."),d=(await st(Pe.AVALUOS.getAll)).map(i=>({id:i.id,vehicle_appraisal_id:i.vehicle_appraisal_id||i.id,fecha:i.appraisal_date||"",cliente:i.applicant||"",vehiculo:`${i.brand||""} ${i.vehicle_description||""} ${i.model_year||""}`.trim(),placa:i.plate_number||"",valor:i.appraisal_value_trochez,color:i.color||"",kilometraje:i.mileage||"",combustible:i.fuel_type||"",motor:i.engine_size||"",propietario:i.owner||"",valorUSD:i.appraisal_value_usd,vin:i.vin||"",numeroMotor:i.engine_number||"",notas:i.notes||"",validezDias:i.validity_days,validezKms:i.validity_kms,extras:i.extras||"",deduccion:i.deductions||"",cert:i.cert||""})),t(2,g=[...d]),y()}catch(u){console.error("Error fetching avalúos:",u);let p="Error al cargar los avalúos.";u.status===401?(p="Error de autenticación. Por favor, inicie sesión nuevamente.",setTimeout(()=>Ve("/login"),2e3)):u.message&&(p+=" "+u.message),alert(p)}finally{t(3,x=!1)}}et(async()=>{const u=localStorage.getItem("userData");if(u)try{t(0,a=JSON.parse(u))}catch(i){console.error("Error parsing user data:",i)}await m();const p=()=>{document.hidden||m()};return document.addEventListener("visibilitychange",p),()=>{document.removeEventListener("visibilitychange",p)}});function _(){if(!c.trim())t(2,g=[...d]);else{const u=c.toLowerCase();t(2,g=d.filter(p=>p.cliente&&p.cliente.toLowerCase().includes(u)||p.vehiculo&&p.vehiculo.toLowerCase().includes(u)||p.placa&&p.placa.toLowerCase().includes(u)||p.color&&p.color.toLowerCase().includes(u)||p.vin&&p.vin.toLowerCase().includes(u)||p.vehicle_appraisal_id&&p.vehicle_appraisal_id.toString().includes(u)||p.cert&&p.cert.toLowerCase().includes(u)))}t(4,D=1),y()}function y(){t(5,k=Math.ceil(g.length/me)),C()}function C(){const u=(D-1)*me,p=u+me;t(6,w=g.slice(u,p))}function A(u){u>=1&&u<=k&&(t(4,D=u),C())}function Y(){Ve("/avaluos/nuevo")}async function W(u){try{const p=localStorage.getItem("jwtToken");if(!p){alert("No se encontró token de autenticación. Por favor inicie sesión nuevamente."),setTimeout(()=>Ve("/login"),1e3);return}t(7,T=!0),t(8,L=u);const i=await fetch(Pe.CERTIFICADOS.get(u),{method:"GET",headers:{Authorization:`Bearer ${p}`}});if(!i.ok)throw new Error(`Error al obtener el certificado: ${i.status} ${i.statusText}`);const z=i.headers.get("content-type");if(z&&z.includes("application/pdf")){const B=await i.blob(),H=window.URL.createObjectURL(B);window.open(H,"_blank")}else if(z&&z.includes("application/json")){const B=await i.json();if(B.url)window.open(B.url,"_blank");else throw new Error(B.message||"Error al generar el certificado")}else{const B=await i.blob(),H=window.URL.createObjectURL(B);window.open(H,"_blank")}}catch(p){console.error("Error al obtener el certificado:",p),alert(`Error al obtener el certificado: ${p.message}`)}finally{t(7,T=!1),t(8,L=null)}}function j(){c=this.value,t(1,c)}return[a,c,g,x,D,k,w,T,L,m,_,A,Y,W,j,u=>W(u.vehicle_appraisal_id),()=>A(D-1),()=>A(D+1),()=>A(D-1),u=>A(u+1),()=>A(D+1)]}class yt extends Ge{constructor(e){super(),Je(this,e,vt,pt,Ke,{})}}export{yt as component};
